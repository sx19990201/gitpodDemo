(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3018],{46160:function(e,n,t){"use strict";t.d(n,{BP:function(){return l},SV:function(){return s},ip:function(){return r},lt:function(){return c}});var a=t(79685),s=(0,a.createContext)([]),l=(0,a.createContext)({}),r=(0,a.createContext)({}),c=(0,a.createContext)({})},2465:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var a=t(45375);function s(e,n){switch(n.type){case"fetched":return n.data;case"selected":default:return e;case"added":return[].concat((0,a.Z)(e),[n.data]);case"changed":return e.map((function(e){return e.id===n.data.id?n.data:e}));case"deleted":return e.filter((function(e){return e.id!==n.data.id}))}}},27902:function(e,n,t){"use strict";t.d(n,{c:function(){return he},L:function(){return Se}});var a=t(79685),s=t(72614),l=(t(95661),t(64970)),r=(t(37757),t(49867)),c=(t(30824),t(62530)),i=(t(23485),t(57028)),o=(t(18477),t(15554)),d=t(29836),u=t(99049),m=t(37558),h=t(39986),x=t(46160),p=t(68471),f=t(18958),j=t.n(f),b=t(63342);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function v(e){var n=e.content,t=(0,a.useContext)(x.lt).handleToggleDesigner,d=(0,a.useContext)(x.BP),f=(0,h.x)(""==n.name),y=(0,u.Z)(f,2),v=y[0],N=y[1],Z=(0,h.x)(""),w=(0,u.Z)(Z,2),k=w[0],S=w[1],C=n.config;(0,a.useEffect)((function(){N(""==n.name)}),[n]),(0,a.useEffect)((function(){S(C.schema)}),[n.config.schema]);var _=function(e){if(""!=e){if(""==n.name){var a=g(g({},n),{},{config:{apiNamespace:e,serverName:e,schema:""},name:e});Reflect.deleteProperty(a,"id"),p.Z.post("/dataSource",a).then((function(e){n.id=e}))}else p.Z.put("/dataSource",g(g({},n),{},{config:g(g({},C),{},{apiNamespace:e,serverName:e}),name:e}));p.Z.get("/dataSource").then((function(e){d({type:"fetched",data:e})})).then((function(){t("detail",n.id)})),N(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b mb-5",children:[(0,b.jsx)("div",{children:(0,b.jsx)("span",{className:"ml-2",children:n.name})}),(0,b.jsxs)("div",{className:"flex  items-center",children:[(0,b.jsx)(i.Z,{checked:0==n.switch,checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(e){p.Z.put("/dataSource",g(g({},n),{},{switch:1==e?0:1})).then((function(){p.Z.get("/dataSource").then((function(e){d({type:"fetched",data:e})}))}))},className:j()["switch-check-btn"]}),(0,b.jsx)("div",{className:"",children:(0,b.jsx)(c.default,{className:"".concat(j()["edit-btn"]," ml-4"),onClick:function(){p.Z.put("/dataSource/content/".concat(n.id),{content:k}).then((function(){o.default.success("\u4fdd\u5b58\u6210\u529f!")}))},children:(0,b.jsx)("span",{children:"\u4fdd\u5b58"})})})]})]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(l.default,{bordered:!0,column:1,size:"small",className:"w-full mt-4",labelStyle:{backgroundColor:"white",width:"30%",borderBottom:"none"},children:(0,b.jsx)(l.default.Item,{label:"\u8fde\u63a5\u540d",className:"h-12",children:(0,b.jsx)(b.Fragment,{children:v?(0,b.jsx)(r.default,{onBlur:function(e){return _(e.target.value)},onPressEnter:function(e){return _(e.target.value)},style:{width:"200px"},defaultValue:C.serverName,autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u5916\u90e8\u6570\u636e\u6e90\u540d"}):(0,b.jsxs)(b.Fragment,{children:[C.apiNamespace,(0,b.jsx)("span",{onClick:function(){return N(!0)},className:"ml-3 cursor-pointer",children:(0,b.jsx)(s.Z,{type:"icon-bianji"})})]})})})})}),(0,b.jsx)("div",{className:"mt-10 flex items-center justify-between",children:(0,b.jsxs)("span",{className:"ml-2 text-xs text-gray-500/80",children:[(0,b.jsx)(s.Z,{type:"icon-zhuyi",className:"mr-2"}),"\u4e3b\u8981\u7528\u4e8e\u65e5\u5fd7\u7b49\u526f\u4f5c\u7528\u64cd\u4f5c"]})}),(0,b.jsx)(m.ZP,{height:"90vh",defaultLanguage:"typescript",defaultValue:"// some comment",className:"mt-4 ".concat(j().monaco),value:k,onChange:function(e){return S(null!==e&&void 0!==e?e:"")}})]})}t(78432);var N=t(20817),Z=(t(41849),t(40835)),w=(t(40426),t(21457)),k=t(16932),S=(t(58226),t(5162)),C=(t(62077),t(9442)),_=t(15729),O=t.n(_),I=t(62543),P=t(53166),F=t(84278),T=t.n(F);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var R=[{title:"\u8868",dataIndex:"table",key:"table",render:function(){return(0,b.jsxs)(C.default,{defaultValue:"table",style:{width:120},bordered:!1,children:[(0,b.jsx)(L,{value:"table",children:"table"}),(0,b.jsx)(L,{value:"lucy",children:"Lucy"}),(0,b.jsx)(L,{value:"Yiminghe",children:"yiminghe"})]})}},{title:"\u5b57\u6bb5",dataIndex:"field",key:"field",render:function(){return(0,b.jsxs)(C.default,{defaultValue:"table",style:{width:120},bordered:!1,children:[(0,b.jsx)(L,{value:"jack",children:"Jack"}),(0,b.jsx)(L,{value:"table",children:"table"}),(0,b.jsx)(L,{value:"Yiminghe",children:"yiminghe"})]})}},{title:"\u54cd\u5e94\u7c7b\u578b",dataIndex:"resType",key:"resType",render:function(){return(0,b.jsxs)(C.default,{defaultValue:"table",style:{width:120},bordered:!1,children:[(0,b.jsx)(L,{value:"table",children:"table"}),(0,b.jsx)(L,{value:"lucy",children:"Lucy"}),(0,b.jsx)(L,{value:"Yiminghe",children:"yiminghe"})]})}},{title:"\u8f93\u5165\u7c7b\u578b",key:"inputType",dataIndex:"inputType",render:function(){return(0,b.jsxs)(C.default,{defaultValue:"table",style:{width:120},bordered:!1,children:[(0,b.jsx)(L,{value:"table",children:"table"}),(0,b.jsx)(L,{value:"lucy",children:"Lucy"}),(0,b.jsx)(L,{value:"Yiminghe",children:"yiminghe"})]})}},{title:"\u662f\u5426\u5f00\u542f",key:"isOpen",render:function(){return(0,b.jsx)(i.Z,{className:"w-8 h-2"})}}],E=[{key:"1",table:"John Brown",field:"123",resType:"New York No. 1 ",inputType:"222",isOpen:!0},{key:"2",table:"John Brown",field:"123",resType:"New York No. 1 ",inputType:"222",isOpen:!1}],L=C.default.Option,z=/^(([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5]))$/,D=/^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?$/,G=/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[._~!@#$^&*])[A-Za-z0-9._~!@#$^&*]{8,20}$/;function q(e){var n,t,o,d,f,j=e.content,y=e.type,g=(0,a.useContext)(x.lt).handleToggleDesigner,v=(0,a.useContext)(x.BP),_=(0,h.x)(!1),F=(0,u.Z)(_,2),B=F[0],q=F[1],Q=(0,h.x)(!1),V=(0,u.Z)(Q,2),M=V[0],U=V[1],$=S.Z.useForm(),K=(0,u.Z)($,1)[0],H=j.config,J=(0,h.x)({}),Y=(0,u.Z)(J,2),W=Y[0],X=Y[1],ee=(0,h.x)(!0),ne=(0,u.Z)(ee,2),te=ne[0],ae=ne[1],se=(0,b.jsx)(S.Z.Item,{label:"\u8fde\u63a5URL",children:(0,b.jsxs)(r.default.Group,{compact:!0,children:[(0,b.jsx)(S.Z.Item,{name:["databaseUrl","kind"],noStyle:!0,children:(0,b.jsxs)(C.default,{className:"w-1/5",onChange:function(e){if("0"===e)return ae(!0),void X({pattern:/^\w{1,128}$/g,message:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u5927\u4e8e128\u7684\u975e\u7a7a\u503c"});ae(!1)},children:[(0,b.jsx)(L,{value:"0",children:"\u503c"}),(0,b.jsx)(L,{value:"1",children:"\u73af\u5883\u53d8\u91cf"})]})}),(0,b.jsx)(S.Z.Item,{name:["databaseUrl","val"],noStyle:!0,rules:[W],children:te?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(C.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(L,{value:"1",children:"1"}),(0,b.jsx)(L,{value:"2",children:"2"})]})})]})}),le=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Z.Item,{label:"\u4e3b\u673a:",name:"host",rules:[{required:!0,message:"\u4e3b\u673a\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:D,message:"\u8bf7\u586b\u5199\u89c4\u8303\u57df\u540d\u6216\u8005ip"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(S.Z.Item,{label:"\u6570\u636e\u5e93\u540d:",name:"dbName",rules:[{required:!0,message:"\u6570\u636e\u5e93\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(S.Z.Item,{label:"\u7aef\u53e3:",name:"port",rules:[{required:!0,message:"\u7aef\u53e3\u53f7\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:z,message:"\u7aef\u53e3\u8303\u56f4\u4e3a0-9999"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(S.Z.Item,{label:"\u7528\u6237:",name:"userName",rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(S.Z.Item,{label:"\u5bc6\u7801:",name:"password",rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:G,message:"\u8bf7\u8f93\u51654-64\u4f4d\u5305\u542b\u6570\u5b57\u3001\u5b57\u6bcd\u548c\u975e\u4e2d\u6587\u5b57\u7b26\u7684\u7ec4\u5408"}],children:(0,b.jsx)(r.default.Password,{placeholder:"\u8bf7\u8f93\u5165..."})})]}),re=(0,h.x)(se),ce=(0,u.Z)(re,2),ie=ce[0],oe=ce[1];if((0,a.useEffect)((function(){K.resetFields(),oe("1"==H.appendType?le:se)}),[j,y]),(0,a.useEffect)((function(){oe(se)}),[te]),!j)return(0,b.jsx)(b.Fragment,{});var de=function(){var e=(0,k.Z)(O().mark((function e(n){var t,a,s;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=A(A({},H),n),""!=j.name){e.next=10;break}return a=A(A({},j),{},{config:t,name:n.apiNamespace}),Reflect.deleteProperty(a,"id"),e.next=6,p.Z.post("/dataSource",a);case 6:s=e.sent,j.id=s,e.next=12;break;case 10:return e.next=12,p.Z.put("/dataSource",A(A({},j),{},{config:t,name:n.apiNamespace}));case 12:p.Z.get("/dataSource").then((function(e){v({type:"fetched",data:e})})).then((function(){g("detail",j.id)}));case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:"detail"===y?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b ",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2 text-[14px]",children:[j.name," ",(0,b.jsx)("span",{className:"text-[#AFB0B4] text-[12px]",children:"main"})]})]}),(0,b.jsxs)("div",{className:"flex  items-center",children:[(0,b.jsx)(i.Z,{checked:0==j.switch,checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(e){p.Z.put("/dataSource",A(A({},j),{},{switch:1==e?0:1})).then((function(){p.Z.get("/dataSource").then((function(e){v({type:"fetched",data:e})}))}))},className:"mr-10 w-15",style:{marginRight:"30px"}}),(0,b.jsx)(c.default,{className:"".concat(T()["connect-check-btn-common"]," w-20"),children:(0,b.jsx)("span",{children:"\u6d4b\u8bd5\u94fe\u63a5"})}),(0,b.jsx)(c.default,{className:"".concat(T()["connect-check-btn-common"]," w-16 ml-4"),children:(0,b.jsx)("span",{children:"\u8bbe\u8ba1"})}),(0,b.jsx)(c.default,{className:"".concat(T()["connect-check-btn"],"  ml-4"),onClick:function(){return g("form",j.id)},children:(0,b.jsx)("span",{children:"\u7f16\u8f91"})})]})]}),(0,b.jsxs)("div",{className:"".concat(T()["db-check-setting"]," float-right mt-2 cursor-pointer"),onClick:function(){return g("setting",j.id)},children:[(0,b.jsx)("span",{className:"w-14 h-5",children:"\u66f4\u591a\u8bbe\u7f6e"})," ",(0,b.jsx)(I.Z,{})]}),(0,b.jsx)("div",{className:"mt-8 ".concat(T()["des-contain"]),children:(0,b.jsxs)(l.default,{bordered:!0,column:1,size:"small",labelStyle:{paddingLeft:"24px",color:"#5F6269",backgroundColor:"white",width:"25%",borderRight:"none",borderBottom:"none"},children:[(0,b.jsx)(l.default.Item,{label:"\u8fde\u63a5\u540d",children:H.apiNamespace}),(0,b.jsx)(l.default.Item,{label:"\u7c7b\u578b",children:H.dbType}),(0,b.jsx)(l.default.Item,{label:"\u7c7b\u578b",children:"0"==H.appendType?"\u8fde\u63a5URL":"1"==H.appendType?"\u8fde\u63a5\u53c2\u6570":""}),"1"==H.appendType?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.default.Item,{label:"\u4e3b\u673a",children:H.host}),(0,b.jsx)(l.default.Item,{label:"\u6570\u636e\u5e93\u540d",children:H.dbName}),(0,b.jsx)(l.default.Item,{label:"\u7aef\u53e3",children:H.port}),(0,b.jsx)(l.default.Item,{label:"\u7528\u6237",children:H.userName}),(0,b.jsx)(l.default.Item,{label:"\u5bc6\u7801",children:M?(0,b.jsxs)("span",{children:[H.password,(0,b.jsx)(s.Z,{className:"ml-2",type:"icon-xiaoyanjing-chakan",onClick:function(){return U(!M)}})]}):(0,b.jsxs)("span",{children:["**********",(0,b.jsx)(s.Z,{className:"ml-2",type:"icon-xiaoyanjing-yincang",onClick:function(){return U(!M)}})]})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.default.Item,{label:"\u73af\u5883\u53d8\u91cf",children:"0"==(null===(n=H.databaseUrl)||void 0===n?void 0:n.kind)?"\u503c":"1"==(null===(t=H.databaseUrl)||void 0===t?void 0:t.kind)?"\u73af\u5883\u53d8\u91cf":""}),(0,b.jsx)(l.default.Item,{label:"\u8fde\u63a5URL",children:null===(o=H.databaseUrl)||void 0===o?void 0:o.val})]})]})})]}):"form"===y?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"pb-8px flex items-center justify-between border-gray border-b ",children:[""==j.name?(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsx)("span",{className:"ml-3",children:"\u521b\u5efa\u6570\u636e\u6e90"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsx)("span",{className:"ml-2",children:j.name}),(0,b.jsx)("span",{className:"ml-2 text-xs text-gray-500/80",children:"main"})]}),(0,b.jsxs)("div",{className:"flex  items-center justify-end w-36",children:[(0,b.jsx)(c.default,{className:"".concat(T()["connect-check-btn-common"]," w-16 mr-4"),onClick:function(){return g("detail",j.id,j.sourceType)},children:"\u53d6\u6d88"}),(0,b.jsx)(c.default,{disabled:B,className:"".concat(T()["connect-check-btn"]),onClick:function(){return K.submit()},children:""==j.name?"\u521b\u5efa":"\u4fdd\u5b58"})]})]}),(0,b.jsx)("div",{className:"".concat(T()["form-contain"]," py-6 rounded-xl mb-4"),children:(0,b.jsxs)(S.Z,{form:K,style:{width:"90%"},name:"basic",labelCol:{span:3},wrapperCol:{span:12},onFinish:function(e){de(e)},onFinishFailed:function(e){console.log("Failed:",e)},onValuesChange:function(e){var n=K.getFieldsError().some((function(e){return e.errors.length}));q(n)},validateTrigger:["onBlur","onChange"],autoComplete:"new-password",labelAlign:"left",initialValues:{apiNamespace:H.apiNamespace,dbType:H.dbType,appendType:H.appendType||"0",host:H.host,dbName:H.dbName,port:H.port,userName:H.userName,password:H.password,databaseUrl:{kind:(null===(d=H.databaseUrl)||void 0===d?void 0:d.kind)||"0",val:null===(f=H.databaseUrl)||void 0===f?void 0:f.val}},children:[(0,b.jsx)(S.Z.Item,{label:"\u540d\u79f0:",name:"apiNamespace",rules:[{required:!0,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165...",autoComplete:"off",autoFocus:!0})}),(0,b.jsx)(S.Z.Item,{label:"\u7c7b\u578b:",name:"dbType",children:(0,b.jsxs)(C.default,{placeholder:"\u8bf7\u8f93\u5165...",defaultValue:"MySQL",children:[(0,b.jsx)(C.default.Option,{value:"MySQL",children:"MySql"}),(0,b.jsx)(C.default.Option,{value:"SQLITE",children:"SQLITE"}),(0,b.jsx)(C.default.Option,{value:"PGSQL",children:"PGSQL"}),(0,b.jsx)(C.default.Option,{value:"MONGODB",children:"MONGODB"})]})}),(0,b.jsx)(S.Z.Item,{label:"\u7c7b\u578b:",name:"appendType",children:(0,b.jsxs)(Z.default.Group,{onChange:function(e){return function(e){switch(e){case"0":oe(se);break;case"1":oe(le);break;default:oe("")}}(e.target.value)},children:[(0,b.jsx)(Z.default,{value:"0",style:{marginRight:"50px"},children:"\u8fde\u63a5URL"}),(0,b.jsx)(Z.default,{value:"1",children:" \u8fde\u63a5\u53c2\u6570 "})]})}),ie,(0,b.jsx)(S.Z.Item,{children:(0,b.jsxs)(c.default,{className:T()["connect-edit-btn"],onClick:function(){return e="bottomLeft",void w.default.open({message:(0,b.jsx)(s.Z,{type:"icon-xingzhuangjiehe"}),description:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{children:"\u94fe\u63a5\u5931\u8d25"}),"\u63cf\u8ff0\u6027\u8bed\u53e5\u63cf\u8ff0\u6027\u8bed\u53e5\u63cf\u8ff0\u6027\u8bed\u53e5"]}),placement:e});var e},children:[(0,b.jsx)(P.Z,{}),(0,b.jsx)("span",{children:"\u6d4b\u8bd5\u94fe\u63a5"})]})})]})})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)(l.default,{bordered:!0,layout:"vertical",size:"small",className:"w-3/8 mr-10",labelStyle:{width:"30%"},children:(0,b.jsx)(l.default.Item,{label:"\u81ea\u5b9a\u4e49\u7c7b\u578b",contentStyle:{padding:"0"},children:(0,b.jsx)(m.ZP,{height:"90vh",defaultLanguage:"typescript",defaultValue:"// some comment",className:"".concat(T().monaco)})})}),(0,b.jsx)(l.default,{bordered:!0,layout:"vertical",size:"small",className:"w-5/8",labelStyle:{width:"30%"},children:(0,b.jsx)(l.default.Item,{label:"\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04",contentStyle:{padding:"0"},children:(0,b.jsx)("div",{className:"".concat(T()["db-setting-table"]),children:(0,b.jsx)(N.Z,{columns:R,dataSource:E,pagination:!1})})})})]})})})}t(4034);var Q=t(47398),V=(t(87191),t(49227)),M=(t(79843),t(69874)),U=(t(36904),t(70718)),$=(t(33898),t(59913)),K=(t(14224),t(830)),H=t(58784),J=t(59682),Y=t(88878),W=t(21959),X=t.n(W);function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te=[{dataIndex:"key",key:"key",width:"30%",render:function(e,n){var t=n.key;return(0,b.jsx)("span",{className:"pl-1",children:t})}},{dataIndex:"val",key:"val",width:"70%",render:function(e,n){var t=n.kind,a=n.val;return(0,b.jsxs)("div",{className:"flex items-center",children:["0"==t?(0,b.jsx)(s.Z,{type:"icon-zhi",className:"text-[24px]"}):"1"==t?(0,b.jsx)(s.Z,{type:"icon-shifoubixu2",className:"text-[24px]"}):(0,b.jsx)(s.Z,{type:"icon-biangeng1",className:"text-[24px]"}),(0,b.jsx)("span",{className:"ml-2",children:a})]})}}];function ae(e){var n=e.content,t=e.type,o=n.config,d=(0,a.useContext)(x.lt).handleToggleDesigner,m=(0,a.useContext)(x.BP),f=(0,h.x)({}),j=(0,u.Z)(f,2),y=j[0],g=j[1],v=(0,h.x)({}),Z=(0,u.Z)(v,2),w=Z[0],_=Z[1],I=(0,h.x)(!1),P=(0,u.Z)(I,2),F=P[0],T=P[1],B=(0,h.x)(void 0!==o.loadSchemaFromString),A=(0,u.Z)(B,2),R=A[0],E=A[1],L=(0,h.x)(!1),z=(0,u.Z)(L,2),D=z[0],G=z[1],q=(0,h.x)(!0),W=(0,u.Z)(q,2),ee=W[0],ae=W[1],se=S.Z.useForm(),le=(0,u.Z)(se,1)[0],re=C.default.Option,ce=K.Z.Panel;(0,a.useEffect)((function(){E(void 0!==o.loadSchemaFromString)}),[t]),(0,a.useEffect)((function(){le.resetFields()}),[n,t]);var ie=function(){var e=(0,k.Z)(O().mark((function e(t){var a,s,l,r,c,i,u,h;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.headers=null===(a=t.headers)||void 0===a?void 0:a.filter((function(e){return void 0!=e.key})),r=ne({},t),c=null===(s=o.loadSchemaFromString)||void 0===s?void 0:s.lastIndexOf("/"),i=null===(l=o.loadSchemaFromString)||void 0===l?void 0:l.substring(c+1),!y.uid){e.next=13;break}if(!o.loadSchemaFromString){e.next=8;break}return e.next=8,(0,p.Z)({method:"post",url:"/dataSource/removeFile",data:{id:i}});case 8:return e.next=10,(0,p.Z)({headers:{"Content-Type":"multipart/form-data"},method:"post",url:"/dataSource/import",data:{file:y}});case 10:r.loadSchemaFromString=e.sent,e.next=20;break;case 13:if(!F){e.next=19;break}return e.next=16,(0,p.Z)({method:"post",url:"/dataSource/removeFile",data:{id:i}});case 16:r.loadSchemaFromString=void 0,e.next=20;break;case 19:r.loadSchemaFromString=o.loadSchemaFromString;case 20:if(""!=n.name){e.next=29;break}return u=ne(ne({},n),{},{config:r,name:t.apiNameSpace}),Reflect.deleteProperty(u,"id"),e.next=25,p.Z.post("/dataSource",u);case 25:h=e.sent,n.id=h,e.next=31;break;case 29:return e.next=31,p.Z.put("/dataSource",ne(ne({},n),{},{config:r,name:t.apiNameSpace}));case 31:p.Z.get("/dataSource").then((function(e){m({type:"fetched",data:e})})).then((function(){d("detail",n.id)}));case 32:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),oe=function(e){switch(e){case"0":return ae(!0),void _({pattern:/^\w{1,128}$/g,message:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u5927\u4e8e128\u7684\u975e\u7a7a\u503c"});case"1":return void ae(!1);case"2":return ae(!0),void _({pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\u7ec4\u6210"});default:return}},de=[],ue=function(e){_({pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\u7ec4\u6210"})};return n?(0,b.jsxs)(b.Fragment,{children:["detail"===t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2",children:[n.name," ",(0,b.jsx)("span",{className:"text-xs text-gray-500/80",children:"GET"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center",children:[(0,b.jsx)(i.Z,{checked:0==n.switch,checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(e){p.Z.put("/dataSource",ne(ne({},n),{},{switch:1==e?0:1})).then((function(){p.Z.get("/dataSource").then((function(e){m({type:"fetched",data:e})}))}))},className:X()["switch-check-btn"]}),(0,b.jsxs)("div",{className:"w-160px",children:[(0,b.jsx)(c.default,{className:"".concat(X()["connect-check-btn-common"]," w-16 ml-4"),onClick:function(){G(!0)},children:(0,b.jsx)("span",{children:"\u6d4b\u8bd5"})}),(0,b.jsx)(c.default,{className:"".concat(X()["edit-btn"]," ml-4"),onClick:function(){return d("form",n.id)},children:(0,b.jsx)("span",{children:"\u7f16\u8f91"})})]})]})]}),(0,b.jsx)("div",{className:"flex justify-center mb-8",children:(0,b.jsxs)(l.default,{bordered:!0,column:1,size:"small",className:X()["descriptions-box"],labelStyle:{backgroundColor:"white",width:"30.5%",borderRight:"none",borderBottom:"none"},children:[(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u540d\u79f0"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.apiNameSpace}),(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"Graphql \u7aef\u70b9"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.url}),null!==o&&void 0!==o&&o.loadSchemaFromString?(0,b.jsxs)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u6307\u5b9aSchema"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),className:"justify-start",children:[(0,b.jsx)(s.Z,{type:"icon-wenjian1"})," ",o.loadSchemaFromString]}):""]})}),(0,b.jsx)("h2",{className:"ml-3 mb-3",children:"\u8bf7\u6c42\u5934"}),(0,b.jsx)("div",{className:"".concat(X()["table-contain"]),children:(0,b.jsx)(N.Z,{bordered:!0,showHeader:!1,columns:te,rowKey:"key",dataSource:o.headers||[],pagination:!1,className:"mb-10"})}),(0,b.jsx)(K.Z,{ghost:!0,bordered:!1,defaultActiveKey:["1"],expandIcon:function(e){var n=e.isActive;return(0,b.jsx)(s.Z,{type:"icon-xiala",rotate:n?0:-90})},className:"".concat(X()["collapse-box"]," site-collapse-custom-collapse bg-light-50"),children:(0,b.jsx)(ce,{header:"\u66f4\u591a",className:"site-collapse-custom-panel",children:(0,b.jsx)("div",{className:"flex justify-center mb-8",children:(0,b.jsxs)(l.default,{colon:!1,column:1,labelStyle:{backgroundColor:"white",width:"31%",borderRight:"none",borderBottom:"none",marginLeft:"10px"},children:[(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u662f\u5426\u5185\u90e8"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.internal?(0,b.jsx)($.default,{color:"green",children:"\u5f00\u542f"}):(0,b.jsx)($.default,{color:"red",children:"\u5173\u95ed"})}),(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u81ea\u5b9a\u4e49Float\u6807\u91cf"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.customFloatScalars}),(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u81ea\u5b9a\u4e49INT\u6807\u91cf"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.customIntScalars}),(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u6392\u9664\u91cd\u547d\u540d\u6839\u5b57\u6bb5"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.skipRenameRootFields})]})})},"1")})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b",children:[""==n.name?(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsx)("span",{className:"ml-2",children:"\u521b\u5efa\u6570\u636e\u6e90"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2",children:[n.name," ",(0,b.jsx)("span",{className:"text-xs text-gray-500/80",children:"GET"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center w-40",children:[(0,b.jsx)(c.default,{className:"".concat(X()["connect-check-btn-common"]," w-16 ml-4"),onClick:function(){return d("detail",n.id,n.sourceType)},children:(0,b.jsx)("span",{children:"\u53d6\u6d88"})}),(0,b.jsx)(c.default,{className:"".concat(X()["edit-btn"]," ml-4"),onClick:function(){le.submit()},children:""==n.name?"\u521b\u5efa":"\u4fdd\u5b58"})]})]}),(0,b.jsx)("div",{className:"py-6 rounded-xl mb-4",children:(0,b.jsxs)(S.Z,{form:le,name:"basic",labelCol:{span:3},wrapperCol:{span:11},onFinish:function(e){ie(e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",validateTrigger:["onBlur","onChange"],className:"ml-3",labelAlign:"left",initialValues:{apiNameSpace:o.apiNameSpace,url:o.url,internal:o.isInner,customFloatScalars:o.defineFloat,customIntScalars:o.defineInt,skipRenameRootFields:o.exceptRename,headers:o.headers||[{kind:"0"}],agreement:void 0!==o.loadSchemaFromString},children:[(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u540d\u79f0:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),colon:!1,style:{marginBottom:"20px"},name:"apiNameSpace",rules:[{required:!0,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"Graphql \u7aef\u70b9:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),colon:!1,required:!0,rules:[{pattern:/^(?:(http|https|ftp):\/\/)?((?:[\w-]+\.)+[a-z0-9]+)((?:\/[^/?#]*)+)?(\?[^#]+)?(#.+)?$/i,message:"\u8bf7\u586b\u5199\u89c4\u8303\u57df\u540d"}],style:{marginBottom:"20px"},name:"url",children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(S.Z.Item,{name:"agreement",children:(0,b.jsx)(U.default,{onChange:function(){E(!R)},children:"\u901a\u8fc7\u53d1\u9001\u6307\u4ee4,\u81ea\u52a8\u5185\u7701Schema"})}),R?(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u6307\u5b9aSchema:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),colon:!1,name:"loadSchemaFromString",required:!0,valuePropName:"fileList",style:{marginBottom:"48px"},getValueFromEvent:function(e){return Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList},children:(0,b.jsx)(M.Z,{defaultFileList:o.loadSchemaFromString?[{name:o.loadSchemaFromString,uid:o.loadSchemaFromString}]:[],onRemove:function(){T(!0),g({})},maxCount:1,beforeUpload:function(e){return new RegExp(".json|.yaml","g").test(e.name)?g(e):e.status="error",!1},children:(0,b.jsx)(c.default,{icon:(0,b.jsx)(H.Z,{}),className:"w-159.5",children:"\u6dfb\u52a0\u6587\u4ef6"})})}):"",(0,b.jsx)("h2",{className:"ml-3 mb-3",children:"\u8bf7\u6c42\u5934:"}),(0,b.jsx)(S.Z.Item,{wrapperCol:{span:24},children:(0,b.jsx)(S.Z.List,{name:"headers",children:function(e,n,t){var a=n.add,l=n.remove,i=t.errors;return(0,b.jsxs)(b.Fragment,{children:[e.map((function(e,n){return(0,b.jsxs)(V.default,{align:"baseline",children:[(0,b.jsx)(S.Z.Item,{className:"w-52.5",name:[e.name,"key"],children:(0,b.jsx)(r.default,{})}),(0,b.jsx)(S.Z.Item,{className:"w-40",name:[e.name,"kind"],children:(0,b.jsxs)(C.default,{onChange:oe,children:[(0,b.jsx)(re,{value:"0",children:"\u503c"}),(0,b.jsx)(re,{value:"1",children:"\u73af\u5883\u53d8\u91cf"}),(0,b.jsx)(re,{value:"2",children:"\u8f6c\u53d1\u81ea\u5ba2\u6237\u7aef"})]})}),(0,b.jsx)(S.Z.Item,{className:"w-135",name:[e.name,"val"],rules:[w],children:ee?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(C.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(re,{value:"1",children:"1"}),(0,b.jsx)(re,{value:"2",children:"2"})]})}),(0,b.jsx)(s.Z,{type:"icon-guanbi",onClick:function(){l(n)}})]},e.key)})),(0,b.jsxs)(S.Z.Item,{wrapperCol:{span:16},children:[(0,b.jsx)(c.default,{type:"dashed",onClick:function(){a({kind:"0"})},icon:(0,b.jsx)(H.Z,{}),className:"text-gray-500/60 w-1/1",children:"\u65b0\u589e\u8bf7\u6c42\u5934\u4fe1\u606f"}),(0,b.jsx)(S.Z.ErrorList,{errors:i})]})]})}})}),(0,b.jsx)(K.Z,{bordered:!1,defaultActiveKey:["1"],expandIcon:function(e){var n=e.isActive;return(0,b.jsx)(J.Z,{rotate:n?90:0})},className:"site-collapse-custom-collapse bg-light-50",children:(0,b.jsxs)(ce,{header:"\u66f4\u591a",className:"site-collapse-custom-panel",children:[(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u662f\u5426\u5185\u90e8:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),valuePropName:"checked",name:"internal",colon:!1,style:{marginBottom:"20px"},children:(0,b.jsx)(i.Z,{className:X()["switch-edit-btn"],size:"small"})}),(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u81ea\u5b9a\u4e49Float\u6807\u91cf:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),name:"customFloatScalars",rules:[w],colon:!1,style:{marginBottom:"20px"},children:(0,b.jsx)(C.default,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:ue,children:de})}),(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u81ea\u5b9a\u4e49INT\u6807\u91cf:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),name:"customIntScalars",rules:[w],colon:!1,style:{marginBottom:"20px"},children:(0,b.jsx)(C.default,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:ue,children:de})}),(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:X()["label-style"],children:"\u6392\u9664\u91cd\u547d\u540d\u6839\u5b57\u6bb5:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(X()["form-icon"]," ml-1")})]}),colon:!1,style:{marginBottom:"20px"},name:"skipRenameRootFields",rules:[w],children:(0,b.jsx)(C.default,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:ue,children:de})})]},"1")})]})})]}),(0,b.jsx)(Q.Z,{title:"GraphiQL",visible:D,onOk:function(){return G(!1)},onCancel:function(){return G(!1)},footer:null,centered:!0,bodyStyle:{height:"90vh"},width:"90vw",children:(0,b.jsx)(Y.default,{url:o.url,data:"",onSave:function(){}})})]}):(0,b.jsx)(b.Fragment,{})}t(85165);var se=t(11744),le=t(33168),re=t(96434),ce=t(14204),ie=t.n(ce);function oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function de(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ue=[{dataIndex:"key",width:"30%",render:function(e,n){var t=n.key;return(0,b.jsx)("span",{className:"pl-1",children:t})}},{dataIndex:"val",width:"70%",render:function(e,n){var t=n.kind,a=n.val;return(0,b.jsxs)("div",{className:"flex items-center",children:["0"==t?(0,b.jsx)(s.Z,{type:"icon-zhi",className:"text-[24px]"}):"1"==t?(0,b.jsx)(s.Z,{type:"icon-shifoubixu2",className:"text-[24px]"}):(0,b.jsx)(s.Z,{type:"icon-biangeng1",className:"text-[24px]"}),(0,b.jsx)("span",{className:"ml-2",children:a})]})}}];function me(e){var n,t=e.content,d=e.type,m=(0,a.useContext)(x.lt).handleToggleDesigner,f=(0,a.useContext)(x.BP),j=S.Z.useForm(),y=(0,u.Z)(j,1)[0],g=(0,h.x)(!1),v=(0,u.Z)(g,2),w=v[0],_=v[1],I=(0,h.x)(!1),P=(0,u.Z)(I,2),F=P[0],T=P[1],B=(0,h.x)(1),A=(0,u.Z)(B,2),R=A[0],E=A[1],L=(0,h.x)(!1),z=(0,u.Z)(L,2),D=z[0],G=z[1],q=(0,h.x)({}),U=(0,u.Z)(q,2),Y=U[0],W=U[1],X=(0,h.x)({}),ee=(0,u.Z)(X,2),ne=ee[0],te=ee[1],ae=(0,h.x)(!0),ce=(0,u.Z)(ae,2),oe=ce[0],me=ce[1],he=(0,h.x)(!0),xe=(0,u.Z)(he,2),pe=xe[0],fe=xe[1];(0,a.useEffect)((function(){y.resetFields()}),[t,d]);if(!t)return(0,b.jsx)(b.Fragment,{});var je=t.config,be=function(){_(!w)},ye=function(e){switch(e){case"0":return fe(!0),void W({pattern:/^\w{1,128}$/g,message:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u5927\u4e8e128\u7684\u975e\u7a7a\u503c"});case"1":return void fe(!1);case"2":return fe(!0),void W({pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\u7ec4\u6210"});default:return}},ge=function(){var e=(0,k.Z)(O().mark((function e(n){var a,s,l,r,c,i,o,d;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.headers=null===(a=n.headers)||void 0===a?void 0:a.filter((function(e){return void 0!=e.key})),r=de({},n),c=null===(s=je.filePath)||void 0===s?void 0:s.lastIndexOf("/"),i=null===(l=je.filePath)||void 0===l?void 0:l.substring(c+1),!ne.uid){e.next=13;break}if(!je.filePath){e.next=8;break}return e.next=8,(0,p.Z)({method:"post",url:"/dataSource/removeFile",data:{id:i}});case 8:return e.next=10,(0,p.Z)({headers:{"Content-Type":"multipart/form-data"},method:"post",url:"/dataSource/import",data:{file:ne}});case 10:r.filePath=e.sent,e.next=20;break;case 13:if(!D){e.next=19;break}return e.next=16,(0,p.Z)({method:"post",url:"/dataSource/removeFile",data:{id:i}});case 16:r.filePath=void 0,e.next=20;break;case 19:r.filePath=je.filePath;case 20:if(""!=t.name){e.next=29;break}return o=de(de({},t),{},{config:r,name:n.apiNameSpace}),Reflect.deleteProperty(o,"id"),e.next=25,p.Z.post("/dataSource",o);case 25:d=e.sent,t.id=d,e.next=31;break;case 29:return e.next=31,p.Z.put("/dataSource",de(de({},t),{},{config:r,name:n.apiNameSpace}));case 31:p.Z.get("/dataSource").then((function(e){f({type:"fetched",data:e})})).then((function(){m("detail",t.id)}));case 32:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ve=se.Z.TabPane,Ne=C.default.Option,Ze=K.Z.Panel;return(0,b.jsx)(b.Fragment,{children:"detail"===d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2",children:[t.name," ",(0,b.jsx)("span",{className:"text-xs text-gray-500/80",children:"GET"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center",children:[(0,b.jsx)(i.Z,{checked:0==t.switch,checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(e){p.Z.put("/dataSource",de(de({},t),{},{switch:1==e?0:1})).then((function(){p.Z.get("/dataSource").then((function(e){f({type:"fetched",data:e})}))}))},className:ie()["switch-check-btn"]}),(0,b.jsx)(c.default,{className:"".concat(ie()["connect-check-btn-common"]," w-16 ml-4"),onClick:function(){return T(!0)},children:(0,b.jsx)("span",{children:"\u6d4b\u8bd5"})}),(0,b.jsx)(c.default,{className:"".concat(ie()["edit-btn"]," ml-4"),onClick:function(){return m("form",t.id)},children:(0,b.jsx)("span",{children:"\u7f16\u8f91"})})]})]}),(0,b.jsx)("div",{className:"flex justify-center mb-8",children:(0,b.jsxs)(l.default,{bordered:!0,column:1,size:"small",className:ie()["descriptions-box"],labelStyle:{backgroundColor:"white",width:"30.5%",borderRight:"none",borderBottom:"none"},children:[(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:ie()["label-style"],children:"\u540d\u79f0"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),className:"justify-start",children:je.apiNameSpace}),(0,b.jsxs)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:ie()["label-style"],children:"\u6307\u5b9aOAS"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),className:"justify-start",children:[(0,b.jsx)(s.Z,{type:"icon-wenjian1"}),je.filePath]})]})}),(0,b.jsxs)(se.Z,{defaultActiveKey:"1",children:[(0,b.jsx)(ve,{tab:"\u8bf7\u6c42\u5934",children:(0,b.jsx)("div",{className:"".concat(ie()["table-contain"]),children:(0,b.jsx)(N.Z,{bordered:!0,showHeader:!1,columns:ue,rowKey:"key",dataSource:je.headers||[],pagination:!1,className:"mb-10"})})},"1"),(0,b.jsx)(ve,{tab:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:ie()["label-style"],children:"\u6388\u6743"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),children:(0,b.jsx)("div",{className:"flex justify-center mb-11",children:(0,b.jsxs)(l.default,{bordered:!0,column:1,size:"small",className:ie()["descriptions-box"],labelStyle:{backgroundColor:"white",borderRight:"none",borderBottom:"none",width:"30%",padding:"10px",paddingLeft:"20px"},children:[(0,b.jsx)(l.default.Item,{label:"JWT\u83b7\u53d6",children:1==je.jwtType?"\u52a8\u6001":"\u9759\u6001"}),(0,b.jsx)(l.default.Item,{label:"\u5bc6\u94a5",children:w?(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"mr-5",children:null===(n=je.secret)||void 0===n?void 0:n.val}),(0,b.jsx)(s.Z,{type:"icon-xiaoyanjing-chakan",onClick:be})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"mr-5",children:"********"}),(0,b.jsx)(s.Z,{type:"icon-xiaoyanjing-yincang",onClick:be})]})}),(0,b.jsx)(l.default.Item,{label:"\u7b7e\u540d\u65b9\u6cd5",children:je.signingMethod}),(0,b.jsx)(l.default.Item,{label:"Token\u7aef\u70b9",children:je.tokenPoint})]})})},"2")]}),(0,b.jsx)(K.Z,{ghost:!0,bordered:!1,defaultActiveKey:["0"],expandIcon:function(e){var n=e.isActive;return(0,b.jsx)(s.Z,{type:"icon-xiala",rotate:n?0:-90})},className:"".concat(ie()["collapse-box"]," site-collapse-custom-collapse bg-white-50"),children:(0,b.jsx)(Ze,{header:"\u66f4\u591a",className:"site-collapse-custom-panel",children:(0,b.jsx)(l.default,{colon:!1,column:1,labelStyle:{backgroundColor:"white",width:"31%",borderRight:"none",borderBottom:"none",paddingLeft:"16px"},children:(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:ie()["label-style"],children:"\u662f\u5426\u72b6\u6001\u8054\u5408:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),className:"justify-start",children:je.statusCodeUnions?(0,b.jsx)($.default,{color:"green",children:"\u5f00\u542f"}):(0,b.jsx)($.default,{color:"red",children:"\u5173\u95ed"})})})},"1")}),(0,b.jsx)(Q.Z,{centered:!0,visible:F,onCancel:function(){return T(!1)},destroyOnClose:!0,width:"80%",bodyStyle:{height:"885px",overflow:"auto"},footer:null,closeIcon:(0,b.jsx)(le.Z,{className:"mr-6"}),children:(0,b.jsx)("div",{className:ie()["redoc-container"],children:(0,b.jsx)(re.RedocStandalone,{specUrl:"http://petstore.swagger.io/v2/swagger.json",options:{nativeScrollbars:!0,theme:{colors:{primary:{main:"#dd5522"}}},disableSearch:!1}})})})]}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b",children:[""==t.name?(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsx)("span",{className:"ml-2",children:"\u521b\u5efa\u6570\u636e\u6e90"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2",children:[t.name," ",(0,b.jsx)("span",{className:"text-xs text-gray-500/80",children:"GET"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center w-160px",children:[(0,b.jsx)(c.default,{className:"".concat(ie()["connect-check-btn-common"]," w-16 ml-4"),onClick:function(){return m("detail",t.id,t.sourceType)},children:(0,b.jsx)("span",{children:"\u53d6\u6d88"})}),(0,b.jsx)(c.default,{className:"".concat(ie()["edit-btn"]," ml-4"),onClick:function(){return y.submit()},children:""==t.name?"\u521b\u5efa":"\u4fdd\u5b58"})]})]}),(0,b.jsx)("div",{className:"py-6 rounded-xl mb-4",children:(0,b.jsxs)(S.Z,{form:y,name:"basic",labelCol:{span:3},wrapperCol:{span:11},onFinish:function(e){ge(e)},onFinishFailed:function(e){throw o.default.error("\u63d0\u4ea4\u5931\u8d25!"),e},autoComplete:"off",validateTrigger:["onBlur","onChange"],labelAlign:"left",className:"ml-3",initialValues:{apiNameSpace:je.apiNameSpace,headers:je.headers||[],statusCodeUnions:je.statusCodeUnions,secret:je.secret||{kind:"0"}},children:[(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"\u540d\u79f0:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"},{pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\u7ec4\u6210"}],name:"apiNameSpace",colon:!1,style:{marginBottom:"20px"},children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(S.Z.Item,{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20 OAS \u6587\u4ef6"}],label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"\u6307\u5b9aOAS:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),colon:!1,name:"filePath",valuePropName:"fileList",style:{marginBottom:"20px"},getValueFromEvent:function(e){return Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList},children:(0,b.jsx)(M.Z,{defaultFileList:je.filePath?[{name:je.filePath,uid:je.filePath}]:[],maxCount:1,beforeUpload:function(e){return new RegExp(".json|.yaml","g").test(e.name)?te(e):e.status="error",!1},onRemove:function(){G(!0),te({})},children:(0,b.jsx)(c.default,{icon:(0,b.jsx)(H.Z,{}),className:"w-159.5",children:"\u6dfb\u52a0\u6587\u4ef6"})})}),(0,b.jsxs)(se.Z,{defaultActiveKey:"1",className:"ml-3",children:[(0,b.jsx)(ve,{tab:"\u8bf7\u6c42\u5934",children:(0,b.jsx)(S.Z.Item,{wrapperCol:{xs:{span:24},sm:{span:24}},children:(0,b.jsx)(S.Z.List,{name:"headers",children:function(e,n,t){var a=n.add,l=n.remove,i=t.errors;return(0,b.jsxs)(b.Fragment,{children:[e.map((function(e,n){return(0,b.jsxs)(V.default,{align:"baseline",children:[(0,b.jsx)(S.Z.Item,{className:"w-52.5",wrapperCol:{span:24},name:[e.name,"key"],children:(0,b.jsx)(r.default,{})}),(0,b.jsx)(S.Z.Item,{className:"w-40",wrapperCol:{span:24},name:[e.name,"kind"],children:(0,b.jsxs)(C.default,{onChange:ye,children:[(0,b.jsx)(Ne,{value:"0",children:"\u503c"}),(0,b.jsx)(Ne,{value:"1",children:"\u73af\u5883\u53d8\u91cf"}),(0,b.jsx)(Ne,{value:"2",children:"\u8f6c\u53d1\u81ea\u5ba2\u6237\u7aef"})]})}),(0,b.jsx)(S.Z.Item,{className:"w-135",wrapperCol:{span:24},name:[e.name,"val"],rules:[Y],children:pe?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(C.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(Ne,{value:"1",children:"1"}),(0,b.jsx)(Ne,{value:"2",children:"2"})]})}),(0,b.jsx)(s.Z,{type:"icon-guanbi",onClick:function(){return l(n)}})]},e.key)})),(0,b.jsxs)(S.Z.Item,{wrapperCol:{span:16},children:[(0,b.jsx)(c.default,{type:"dashed",onClick:function(){return a({kind:"0"})},icon:(0,b.jsx)(H.Z,{}),className:"text-gray-500/60 w-1/1",children:"\u65b0\u589e\u8bf7\u6c42\u5934\u4fe1\u606f"}),(0,b.jsx)(S.Z.ErrorList,{errors:i})]})]})}})})},"1"),(0,b.jsxs)(ve,{tab:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"\u6388\u6743"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),children:[(0,b.jsx)(S.Z.Item,{label:"JWT\u83b7\u53d6",name:"jwtType",initialValue:"0",children:(0,b.jsxs)(Z.default.Group,{onChange:function(e){E(e.target.value),me(!oe)},value:R,children:[(0,b.jsx)(Z.default,{value:"0",className:"mr-20",children:"\u9759\u6001"}),(0,b.jsx)(Z.default,{value:"1",children:"\u52a8\u6001"})]})}),oe?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Z.Item,{label:"\u5bc6\u94a5",children:(0,b.jsxs)(r.default.Group,{compact:!0,children:[(0,b.jsx)(S.Z.Item,{name:["secret","kind"],noStyle:!0,children:(0,b.jsxs)(C.default,{className:"w-1/5",onChange:ye,children:[(0,b.jsx)(Ne,{value:"0",children:"\u503c"}),(0,b.jsx)(Ne,{value:"1",children:"\u73af\u5883\u53d8\u91cf"})]})}),(0,b.jsx)(S.Z.Item,{name:["secret","val"],noStyle:!0,rules:[Y],children:pe?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(C.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(Ne,{value:"1",children:"1"}),(0,b.jsx)(Ne,{value:"2",children:"2"})]})})]})}),(0,b.jsx)(S.Z.Item,{label:"\u7b7e\u540d\u65b9\u6cd5",name:"signingMethod",initialValue:"HS256",children:(0,b.jsx)(Z.default,{value:"HS256",checked:!0,children:"HS256"})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Z.Item,{label:"\u5bc6\u94a5",children:(0,b.jsxs)(r.default.Group,{compact:!0,children:[(0,b.jsx)(S.Z.Item,{name:["secret","kind"],noStyle:!0,children:(0,b.jsxs)(C.default,{className:"w-1/5",onChange:ye,children:[(0,b.jsx)(Ne,{value:"0",children:"\u503c"}),(0,b.jsx)(Ne,{value:"1",children:"\u73af\u5883\u53d8\u91cf"})]})}),(0,b.jsx)(S.Z.Item,{name:["secret","val"],noStyle:!0,rules:[Y],children:pe?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(C.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(Ne,{value:"1",children:"1"}),(0,b.jsx)(Ne,{value:"2",children:"2"})]})})]})}),(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Token \u7aef\u70b9:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),colon:!1,required:!0,style:{marginBottom:"20px"},name:"tokenPoint",children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})})]})]},"2")]}),(0,b.jsx)(K.Z,{bordered:!1,defaultActiveKey:["0"],expandIcon:function(e){var n=e.isActive;return(0,b.jsx)(J.Z,{rotate:n?90:0})},className:"site-collapse-custom-collapse bg-light-50",children:(0,b.jsx)(Ze,{header:"\u66f4\u591a",className:"site-collapse-custom-panel",children:(0,b.jsx)(S.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:ie()["label-style"],children:"\u662f\u5426\u72b6\u6001\u8054\u5408:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(ie()["form-icon"]," ml-1")})]}),name:"statusCodeUnions",colon:!1,style:{marginBottom:"20px"},valuePropName:"checked",children:(0,b.jsx)(i.Z,{className:ie()["switch-edit-btn"],size:"small"})})},"1")})]})})]})})}function he(e){var n=e.content,t=e.showType,l=function(){console.log("aaa")},r=(0,a.useMemo)((function(){var e="";switch(null===n||void 0===n?void 0:n.sourceType){case 1:e="setting"==t?"\u8bbe\u7f6e":"DB";break;case 2:e="REST";break;case 3:e="GraphQL";break;case 4:e="\u81ea\u5b9a\u4e49"}return e}),[null===n||void 0===n?void 0:n.sourceType,t]);return n?(0,b.jsxs)("div",{className:"pl-6 mt-6 mr-6",children:[(0,b.jsxs)("div",{className:"flex justify-start items-center  mb-24px",children:[(0,b.jsxs)("span",{className:"text-base flex-grow font-bold text-[18px]",children:["\u5916\u90e8\u6570\u636e\u6e90 / ",n&&r]}),(0,b.jsx)(s.Z,{type:"icon-lianxi",className:"text-[22px]",onClick:l}),(0,b.jsx)(s.Z,{type:"icon-wenjian1",className:"text-[22px] ml-4",onClick:l}),(0,b.jsx)(s.Z,{type:"icon-bangzhu",className:"text-[22px] ml-4",onClick:l})]}),1===n.sourceType?(0,b.jsx)(q,{content:n,type:t}):2===n.sourceType?(0,b.jsx)(me,{content:n,type:t}):3===n.sourceType?(0,b.jsx)(ae,{content:n,type:t}):4===n.sourceType?(0,b.jsx)(v,{content:n}):(0,b.jsx)(b.Fragment,{})]}):(0,b.jsx)(b.Fragment,{})}var xe=t(11082),pe=t.n(xe),fe=(t(95421),t(75871)),je=(t(61382),t(12206)),be=(t(44322),t(2670)),ye=t(53986),ge=t.n(ye);function ve(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ve(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ze(e){var n,t,l=e.datasourceItem,c=e.onClickItem,i=(0,a.useContext)(x.BP),o=(0,h.x)(""==l.name),d=(0,u.Z)(o,2),m=d[0],f=d[1],j=(0,h.x)(!1),y=(0,u.Z)(j,2),g=y[0],v=y[1],N=(0,a.useContext)(x.lt).handleToggleDesigner,Z=(0,a.useContext)(x.ip).currDBId,w=(0,h.x)(!1),S=(0,u.Z)(w,2),C=S[0],_=S[1],I=l.config;function P(e){return F.apply(this,arguments)}function F(){return(F=(0,k.Z)(O().mark((function e(n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n){e.next=4;break}i({type:"deleted",data:l}),e.next=7;break;case 4:return e.next=6,p.Z.put("/dataSource",Ne(Ne({},l),{},{name:n,config:Ne(Ne({},I),{},{apiNameSpace:n})}));case 6:p.Z.get("/dataSource").then((function(e){i({type:"fetched",data:e})}));case 7:f(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,k.Z)(O().mark((function e(n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.delete("/dataSource/".concat(n.id));case 2:e.sent,i({type:"deleted",data:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){0==e&&(_(!1),v(!1))}var A=(0,b.jsx)(je.default,{onClick:function(e){e.domEvent.stopPropagation(),"1"!==e.key&&"2"!==e.key||v(!1)},items:[{key:"1",label:(0,b.jsxs)("div",{onClick:function(){f(!m)},children:[(0,b.jsx)(s.Z,{type:"icon-zhongmingming"}),(0,b.jsx)("span",{className:"ml-1.5",children:"\u91cd\u547d\u540d"})]})},{key:"2",label:(0,b.jsxs)("div",{onClick:function(){return N("form",l.id)},children:[(0,b.jsx)(s.Z,{type:"icon-bianji"}),(0,b.jsx)("span",{className:"ml-1.5",children:"\u7f16\u8f91"})]})},{key:"3",label:(0,b.jsx)(be.Z,{placement:"right",title:"\u786e\u8ba4\u5220\u9664\u8be5\u5b9e\u4f53\u5417\uff1f",onConfirm:function(){!function(e){T.apply(this,arguments)}(l)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onCancel:function(){return v(!1)},overlayClassName:ge()["delete-label"],okType:"danger",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-a-shanchu2"}),(0,b.jsx)("span",{className:"ml-1.5",children:"\u5220\u9664"})]})})}]});return(0,b.jsxs)("div",{className:"flex justify-between items-center py-2.5 pl-5\n      ".concat(l.id===Z?"bg-[#F8F8F9]":""),style:C?{background:"#F8F8F9"}:{},onMouseEnter:function(){return _(!0)},onMouseLeave:function(){return B(g)},onDoubleClick:function(){return f(!0)},onClick:function(){c(l)},children:[(0,b.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,b.jsx)(s.Z,{type:"icon-tuozhuai-xuanzhong",className:"-ml-3 mr-1",style:{visibility:C?"visible":"hidden"}}),1==l.sourceType?(0,b.jsx)(s.Z,{type:"SQLITE"==I.dbType?"icon-shujuyuantubiao2":"PGSQL"==I.dbType?"icon-shujuyuantubiao3":"MONGODB"==I.dbType?"icon-shujuyuantubiao4":"icon-shujuyuantubiao1"}):2==l.sourceType?(0,b.jsx)(s.Z,{type:"icon-wenjian1",className:"text-[16px]"}):3==l.sourceType?(0,b.jsx)(s.Z,{type:"icon-QLweixuanzhong1",className:"text-[16px]"}):(0,b.jsx)(s.Z,{type:"icon-wenjian",className:"text-[16px]"}),m?(0,b.jsx)(r.default,{onBlur:function(e){P(e.target.value)},onPressEnter:function(e){P(e.target.value)},onKeyUp:function(e){"Escape"==e.key&&f(!1)},className:"text-sm font-normal leading-4 h-5 w-5/7",defaultValue:l.name,autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u5916\u90e8\u6570\u636e\u6e90\u540d"}):(0,b.jsx)("div",{className:"text-sm font-normal ml-2 leading-4 ".concat(0==l.switch?"text-[#000000]":"text-[#AFB0B4]"," ").concat(l.id===Z?"font-650":""),children:l.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[#AFB0B4] text-[14px] mr-3",children:I.dbName||(null===(n=I.databaseUrl)||void 0===n?void 0:n.val.substring((null===(t=I.databaseUrl)||void 0===t?void 0:t.val.length)-3))}),(0,b.jsx)(fe.default,{overlay:A,trigger:["click"],placement:"bottomRight",visible:g,onVisibleChange:function(e){v(e),B(e)},children:(0,b.jsx)(s.Z,{type:"icon-gengduo-shu-xuanzhong",onClick:function(e){return e.stopPropagation()},className:"m-auto mr-0 pr-2",style:{visibility:C?"visible":"hidden"}})})]})]},l.name)}var we=K.Z.Panel;function ke(e){var n=e.onClickItem,t=e.datasourceType,s=(0,a.useContext)(x.SV);return(0,b.jsx)(b.Fragment,{children:s.filter((function(e){return e.sourceType==t})).map((function(e){if(""!=e.name)return(0,b.jsx)(Ze,{datasourceItem:e,onClickItem:n},e.id)}))})}function Se(e){var n=e.onClickItem,t=(0,a.useContext)(x.BP),s=(0,a.useContext)(x.SV),l=(0,h.x)([]),r=(0,u.Z)(l,2),c=r[0],i=r[1],o=(0,h.x)(0),d=(0,u.Z)(o,2),m=d[0],p=d[1];function f(e,a){return(0,b.jsxs)("div",{className:"w-full flex justify-between items-center py-2 pr-1 ",onMouseEnter:function(){p(a)},onMouseLeave:function(){p(0)},children:[(0,b.jsx)("span",{children:e}),m==a?(0,b.jsx)(H.Z,{onClick:function(e){e.stopPropagation(),i(c.concat(a.toString())),function(e){var a={id:-(s.length+1),name:"",config:{},sourceType:e,switch:0};t({type:"added",data:a}),n(a)}(a)}}):""]})}return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:pe()["datasource-collapse"],children:(0,b.jsx)(K.Z,{ghost:!0,bordered:!0,children:(0,b.jsx)(we,{header:(0,b.jsx)("div",{className:"w-52 flex justify-between py-2",children:"\u5916\u90e8\u6570\u636e\u6e90"}),children:(0,b.jsx)("div",{className:"h-40",style:{overflow:"auto"},children:(0,b.jsxs)(K.Z,{activeKey:c,ghost:!0,bordered:!0,onChange:function(e){return i(e)},children:[(0,b.jsx)(we,{header:f("DB",1),className:pe()["datasource-border"],children:(0,b.jsx)(ke,{onClickItem:n,datasourceType:1})},"1"),(0,b.jsx)(we,{header:f("REST",2),className:pe()["datasource-border"],children:(0,b.jsx)(ke,{onClickItem:n,datasourceType:2})},"2"),(0,b.jsx)(we,{header:f("GraphQL",3),className:pe()["datasource-border"],children:(0,b.jsx)(ke,{onClickItem:n,datasourceType:3})},"3"),(0,b.jsx)(we,{header:f("\u81ea\u5b9a\u4e49",4),className:pe()["datasource-border"],children:(0,b.jsx)(ke,{onClickItem:n,datasourceType:4})},"4")]})})},1)})})})}},88878:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var a=t(40693),s=t(61135),l=t(93795),r=t(43458),c=t(53184),i=t.n(c),o=t(79685),d=(t(24301),t(17345)),u=t.n(d),m=t(63342);function h(e){var n=e.url,t=e.data,c=e.onSave,d=(0,o.useState)(),h=d[0],x=d[1],p=(0,o.useState)(null!==t&&void 0!==t?t:'# Welcome to GraphiQL\n#\n# GraphiQL is an in-browser tool for writing, validating, and\n# testing GraphQL queries.\n#\n# Type queries into this side of the screen, and you will see intelligent\n# typeaheads aware of the current GraphQL type schema and live syntax and\n# validation errors highlighted within the text.\n#\n# GraphQL queries typically start with a "{" character. Lines that start\n# with a # are ignored.\n#\n# An example GraphQL query might look like:\n#\n#     {\n#       field(arg: "value") {\n#         subField\n#       }\n#     }\n#\n# Keyboard shortcuts:\n#\n#  Prettify Query:  Shift-Ctrl-P (or press the prettify button above)\n#\n#     Merge Query:  Shift-Ctrl-M (or press the merge button above)\n#\n#       Run Query:  Ctrl-Enter (or press the play button above)\n#\n#   Auto Complete:  Ctrl-Space (or just start typing)\n#\n'),f=p[0],j=p[1],b=(0,o.useRef)();function y(e){return fetch(null!==n&&void 0!==n?n:"/app/main/graphql",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).catch((function(e){throw e}))}return(0,o.useEffect)((function(){y({query:(0,l.K)()}).then((function(e){return x((0,r.Z)(e.data))})).catch((function(e){throw e}))}),[]),(0,o.useEffect)((function(){j(t)}),[t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i(),{children:(0,m.jsx)("title",{children:"GraphiQL"})}),(0,m.jsxs)("div",{className:"".concat(u().global," graphiql-container"),children:[(0,m.jsx)(s.ZP,{schema:h,query:f,explorerIsOpen:!0,onEdit:j}),(0,m.jsx)(a.yB,{fetcher:y,schema:h,query:f,ref:function(e){return b.current=e},onEditQuery:j,children:(0,m.jsxs)(a.yB.Toolbar,{children:[(0,m.jsx)(a.yB.Button,{onClick:function(){var e,n;return null===(e=b.current)||void 0===e||null===(n=e.ref)||void 0===n?void 0:n.props.prettify()},label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),(0,m.jsx)(a.yB.Button,{onClick:function(){var e,n;return null===(e=b.current)||void 0===e||null===(n=e.ref)||void 0===n?void 0:n.props.merge()},label:"Merge",title:"Merge Query (Shift-Ctrl-M)"}),(0,m.jsx)(a.yB.Button,{onClick:function(){var e,n,t;return null===(e=b.current)||void 0===e||null===(n=e.ref)||void 0===n||null===(t=n.props.historyContext)||void 0===t?void 0:t.toggle()},label:"History",title:"Show History"}),(0,m.jsx)(a.yB.Button,{onClick:function(){var e,n,t=null===(e=b.current)||void 0===e||null===(n=e.ref)||void 0===n?void 0:n.props.query;return c(t)},label:"Save",title:"Save"})]})})]})]})}},11082:function(e){e.exports={pannel:"Pannel_pannel__HhmjN",title:"Pannel_title__uUaWL","datasource-collapse":"Pannel_datasource-collapse__V__8p","datasource-border":"Pannel_datasource-border__02dZ5"}},18958:function(e){e.exports={monaco:"Custom_monaco__zbX6e","edit-btn":"Custom_edit-btn__Owb9r","switch-check-btn":"Custom_switch-check-btn__ZaAu6"}},84278:function(e){e.exports={"connect-edit-btn":"DB_connect-edit-btn__gr1_e","connect-check-btn":"DB_connect-check-btn__wOt1f","connect-check-btn-common":"DB_connect-check-btn-common__QHfNO","db-check-setting":"DB_db-check-setting__CFFvT","form-contain":"DB_form-contain__SuK0v","des-contain":"DB_des-contain__S6tfC",monaco:"DB_monaco__Qn158","db-setting-table":"DB_db-setting-table__ratw3"}},21959:function(e){e.exports={"edit-btn":"Graphql_edit-btn__bqcAZ","switch-check-btn":"Graphql_switch-check-btn__eaD7_","descriptions-box":"Graphql_descriptions-box__55kVn","collapse-box":"Graphql_collapse-box__VzJkr","form-icon":"Graphql_form-icon__hhMA9","label-style":"Graphql_label-style__Oui9z","connect-check-btn-common":"Graphql_connect-check-btn-common__YOZ4C","table-contain":"Graphql_table-contain__R_pAD"}},53986:function(e){e.exports={"delete-label":"PannelItem_delete-label__zQGzl"}},14204:function(e){e.exports={"edit-btn":"Rest_edit-btn__Inn1J","switch-check-btn":"Rest_switch-check-btn__t5oem","switch-edit-btn":"Rest_switch-edit-btn__mhdjp","descriptions-box":"Rest_descriptions-box__lwL8d","collapse-box":"Rest_collapse-box__NzdmA","form-icon":"Rest_form-icon__3SQjD","label-style":"Rest_label-style__RrMb9","connect-check-btn-common":"Rest_connect-check-btn-common__NTg_i","table-contain":"Rest_table-contain__007yR","redoc-container":"Rest_redoc-container__FRI6Q"}},17345:function(e){e.exports={global:"graphiql_global__Ljt2l"}},73089:function(){},56245:function(){},7905:function(){},3885:function(){},3672:function(){},13089:function(){},19617:function(){},2764:function(){}}]);
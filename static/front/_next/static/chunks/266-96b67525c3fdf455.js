(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{70615:function(e,n,t){"use strict";t.d(n,{BP:function(){return l},SV:function(){return s},ip:function(){return r},lt:function(){return c}});var a=t(79685),s=(0,a.createContext)([]),l=(0,a.createContext)({}),r=(0,a.createContext)({}),c=(0,a.createContext)({})},28415:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var a=t(37216);function s(e,n){switch(n.type){case"fetched":return n.data;case"selected":default:return e;case"added":return[].concat((0,a.Z)(e),[n.data]);case"changed":return e.map((function(e){return e.id===n.data.id?n.data:e}));case"deleted":return e.filter((function(e){return e.id!==n.data.id}))}}},81378:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});t(61953);var a=t(13413),s=t(63342);function l(){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,s.jsx)(a.Z,{src:"/assets/50x.png",height:89,width:198,alt:"50x",preview:!1}),(0,s.jsx)("div",{className:"my-8 ml-6 text-sm text-[#AFB0B4CC]",children:"\u7f51\u7edc\u51fa\u73b0\u95ee\u9898\uff5e"})]})}},41163:function(e,n,t){"use strict";t.d(n,{c:function(){return be},L:function(){return Fe}});var a=t(79685),s=t(61384),l=(t(22694),t(1980)),r=(t(85800),t(41503)),c=(t(68158),t(29094)),i=(t(14850),t(71887)),o=(t(52201),t(8860)),d=t(78818),u=t(95513),m=t(37558),h=t(39986),x=t(70615),p=t(86669),f=t(49775),j=t.n(f),b=t(63342);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function v(e){var n=e.content,t=(0,a.useContext)(x.lt).handleToggleDesigner,d=(0,a.useContext)(x.BP),f=(0,h.x)(""==n.name),y=(0,u.Z)(f,2),v=y[0],N=y[1],w=(0,h.x)(""),Z=(0,u.Z)(w,2),k=Z[0],C=Z[1],S=n.config;(0,a.useEffect)((function(){N(""==n.name)}),[n]),(0,a.useEffect)((function(){C(S.schema)}),[n.config.schema]);var _=function(e){if(""!=e){if(""==n.name){var a=g(g({},n),{},{config:{apiNamespace:e,serverName:e,schema:""},name:e});Reflect.deleteProperty(a,"id"),p.Z.post("/dataSource",a).then((function(e){n.id=e}))}else p.Z.put("/dataSource",g(g({},n),{},{config:g(g({},S),{},{apiNamespace:e,serverName:e}),name:e}));p.Z.get("/dataSource").then((function(e){d({type:"fetched",data:e})})).then((function(){t("detail",n.id)})),N(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b mb-5",children:[(0,b.jsx)("div",{children:(0,b.jsx)("span",{className:"ml-2",children:n.name})}),(0,b.jsxs)("div",{className:"flex  items-center",children:[(0,b.jsx)(i.Z,{checked:0==n.switch,checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(e){p.Z.put("/dataSource",g(g({},n),{},{switch:1==e?0:1})).then((function(){p.Z.get("/dataSource").then((function(e){d({type:"fetched",data:e})}))}))},className:j()["switch-check-btn"]}),(0,b.jsx)("div",{className:"",children:(0,b.jsx)(c.default,{className:"".concat(j()["edit-btn"]," ml-4"),onClick:function(){p.Z.put("/dataSource/content/".concat(n.id),{content:k}).then((function(){o.default.success("\u4fdd\u5b58\u6210\u529f!")}))},children:(0,b.jsx)("span",{children:"\u4fdd\u5b58"})})})]})]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(l.default,{bordered:!0,column:1,size:"small",className:"w-full mt-4",labelStyle:{backgroundColor:"white",width:"30%",borderBottom:"none"},children:(0,b.jsx)(l.default.Item,{label:"\u8fde\u63a5\u540d",className:"h-12",children:(0,b.jsx)(b.Fragment,{children:v?(0,b.jsx)(r.default,{onBlur:function(e){return _(e.target.value)},onPressEnter:function(e){return _(e.target.value)},style:{width:"200px"},defaultValue:S.serverName,autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u5916\u90e8\u6570\u636e\u6e90\u540d"}):(0,b.jsxs)(b.Fragment,{children:[S.apiNamespace,(0,b.jsx)("span",{onClick:function(){return N(!0)},className:"ml-3 cursor-pointer",children:(0,b.jsx)(s.Z,{type:"icon-bianji"})})]})})})})}),(0,b.jsx)("div",{className:"mt-10 flex items-center justify-between",children:(0,b.jsxs)("span",{className:"ml-2 text-xs text-gray-500/80",children:[(0,b.jsx)(s.Z,{type:"icon-zhuyi",className:"mr-2"}),"\u4e3b\u8981\u7528\u4e8e\u65e5\u5fd7\u7b49\u526f\u4f5c\u7528\u64cd\u4f5c"]})}),(0,b.jsx)(m.ZP,{height:"90vh",defaultLanguage:"typescript",defaultValue:"// some comment",className:"mt-4 ".concat(j().monaco),value:k,onChange:function(e){return C(null!==e&&void 0!==e?e:"")}})]})}t(3003);var N=t(86690),w=(t(54254),t(60346)),Z=(t(82434),t(85481)),k=t(77227),C=(t(29872),t(88050)),S=(t(2245),t(48628)),_=t(50724),O=t.n(_),I=t(62543),F=t(53166),P=t(81378),T=t(95957),B=t.n(T);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var L=[{title:"\u8868",dataIndex:"table",key:"table",render:function(){return(0,b.jsxs)(S.default,{defaultValue:"table",style:{width:120},bordered:!1,children:[(0,b.jsx)(z,{value:"table",children:"table"}),(0,b.jsx)(z,{value:"lucy",children:"Lucy"}),(0,b.jsx)(z,{value:"Yiminghe",children:"yiminghe"})]})}},{title:"\u5b57\u6bb5",dataIndex:"field",key:"field",render:function(){return(0,b.jsxs)(S.default,{defaultValue:"table",style:{width:120},bordered:!1,children:[(0,b.jsx)(z,{value:"jack",children:"Jack"}),(0,b.jsx)(z,{value:"table",children:"table"}),(0,b.jsx)(z,{value:"Yiminghe",children:"yiminghe"})]})}},{title:"\u54cd\u5e94\u7c7b\u578b",dataIndex:"resType",key:"resType",render:function(){return(0,b.jsxs)(S.default,{defaultValue:"table",style:{width:120},bordered:!1,children:[(0,b.jsx)(z,{value:"table",children:"table"}),(0,b.jsx)(z,{value:"lucy",children:"Lucy"}),(0,b.jsx)(z,{value:"Yiminghe",children:"yiminghe"})]})}},{title:"\u8f93\u5165\u7c7b\u578b",key:"inputType",dataIndex:"inputType",render:function(){return(0,b.jsxs)(S.default,{defaultValue:"table",style:{width:120},bordered:!1,children:[(0,b.jsx)(z,{value:"table",children:"table"}),(0,b.jsx)(z,{value:"lucy",children:"Lucy"}),(0,b.jsx)(z,{value:"Yiminghe",children:"yiminghe"})]})}},{title:"\u662f\u5426\u5f00\u542f",key:"isOpen",render:function(){return(0,b.jsx)(i.Z,{className:"w-8 h-2"})}}],R=[{key:"1",table:"John Brown",field:"123",resType:"New York No. 1 ",inputType:"222",isOpen:!0},{key:"2",table:"John Brown",field:"123",resType:"New York No. 1 ",inputType:"222",isOpen:!1}],z=S.default.Option,D=/^(([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5]))$/,q=/^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?$/,G=/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[._~!@#$^&*])[A-Za-z0-9._~!@#$^&*]{8,20}$/;function Q(e){var n,t,o,d,f,j=e.content,y=e.type,g=(0,a.useContext)(x.lt).handleToggleDesigner,v=(0,a.useContext)(x.BP),_=(0,h.x)(!1),T=(0,u.Z)(_,2),A=T[0],Q=T[1],U=(0,h.x)(!1),V=(0,u.Z)(U,2),M=V[0],$=V[1],K=C.Z.useForm(),H=(0,u.Z)(K,1)[0],J=j.config,Y=(0,h.x)({}),W=(0,u.Z)(Y,2),X=W[0],ee=W[1],ne=(0,h.x)(!0),te=(0,u.Z)(ne,2),ae=te[0],se=te[1],le=(0,b.jsx)(C.Z.Item,{label:"\u8fde\u63a5URL",children:(0,b.jsxs)(r.default.Group,{compact:!0,children:[(0,b.jsx)(C.Z.Item,{name:["databaseUrl","kind"],noStyle:!0,children:(0,b.jsxs)(S.default,{className:"w-1/5",onChange:function(e){if("0"===e)return se(!0),void ee({pattern:/^\w{1,128}$/g,message:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u5927\u4e8e128\u7684\u975e\u7a7a\u503c"});se(!1)},children:[(0,b.jsx)(z,{value:"0",children:"\u503c"}),(0,b.jsx)(z,{value:"1",children:"\u73af\u5883\u53d8\u91cf"})]})}),(0,b.jsx)(C.Z.Item,{name:["databaseUrl","val"],noStyle:!0,rules:[X],children:ae?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(S.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(z,{value:"1",children:"1"}),(0,b.jsx)(z,{value:"2",children:"2"})]})})]})}),re=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Z.Item,{label:"\u4e3b\u673a:",name:"host",rules:[{required:!0,message:"\u4e3b\u673a\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:q,message:"\u8bf7\u586b\u5199\u89c4\u8303\u57df\u540d\u6216\u8005ip"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(C.Z.Item,{label:"\u6570\u636e\u5e93\u540d:",name:"dbName",rules:[{required:!0,message:"\u6570\u636e\u5e93\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(C.Z.Item,{label:"\u7aef\u53e3:",name:"port",rules:[{required:!0,message:"\u7aef\u53e3\u53f7\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:D,message:"\u7aef\u53e3\u8303\u56f4\u4e3a0-9999"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(C.Z.Item,{label:"\u7528\u6237:",name:"userName",rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(C.Z.Item,{label:"\u5bc6\u7801:",name:"password",rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:G,message:"\u8bf7\u8f93\u51654-64\u4f4d\u5305\u542b\u6570\u5b57\u3001\u5b57\u6bcd\u548c\u975e\u4e2d\u6587\u5b57\u7b26\u7684\u7ec4\u5408"}],children:(0,b.jsx)(r.default.Password,{placeholder:"\u8bf7\u8f93\u5165..."})})]}),ce=(0,h.x)(le),ie=(0,u.Z)(ce,2),oe=ie[0],de=ie[1];if((0,a.useEffect)((function(){H.resetFields(),de("1"==J.appendType?re:le)}),[j,y]),(0,a.useEffect)((function(){de(le)}),[ae]),!j)return(0,b.jsx)(P.Z,{});var ue=function(){var e=(0,k.Z)(O().mark((function e(n){var t,a,s;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E(E({},J),n),""!=j.name){e.next=10;break}return a=E(E({},j),{},{config:t,name:n.apiNamespace}),Reflect.deleteProperty(a,"id"),e.next=6,p.Z.post("/dataSource",a);case 6:s=e.sent,j.id=s,e.next=12;break;case 10:return e.next=12,p.Z.put("/dataSource",E(E({},j),{},{config:t,name:n.apiNamespace}));case 12:p.Z.get("/dataSource").then((function(e){v({type:"fetched",data:e})})).then((function(){g("detail",j.id)}));case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:"detail"===y?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b ",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2 text-[14px]",children:[j.name," ",(0,b.jsx)("span",{className:"text-[#AFB0B4] text-[12px]",children:"main"})]})]}),(0,b.jsxs)("div",{className:"flex  items-center",children:[(0,b.jsx)(i.Z,{checked:0==j.switch,checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(e){p.Z.put("/dataSource",E(E({},j),{},{switch:1==e?0:1})).then((function(){p.Z.get("/dataSource").then((function(e){v({type:"fetched",data:e})}))}))},className:"mr-10 w-15",style:{marginRight:"30px"}}),(0,b.jsx)(c.default,{className:"".concat(B()["connect-check-btn-common"]," w-20"),children:(0,b.jsx)("span",{children:"\u6d4b\u8bd5\u94fe\u63a5"})}),(0,b.jsx)(c.default,{className:"".concat(B()["connect-check-btn-common"]," w-16 ml-4"),children:(0,b.jsx)("span",{children:"\u8bbe\u8ba1"})}),(0,b.jsx)(c.default,{className:"".concat(B()["connect-check-btn"],"  ml-4"),onClick:function(){return g("form",j.id)},children:(0,b.jsx)("span",{children:"\u7f16\u8f91"})})]})]}),(0,b.jsxs)("div",{className:"".concat(B()["db-check-setting"]," float-right mt-2 cursor-pointer"),onClick:function(){return g("setting",j.id)},children:[(0,b.jsx)("span",{className:"w-14 h-5",children:"\u66f4\u591a\u8bbe\u7f6e"})," ",(0,b.jsx)(I.Z,{})]}),(0,b.jsx)("div",{className:"mt-8 ".concat(B()["des-contain"]),children:(0,b.jsxs)(l.default,{bordered:!0,column:1,size:"small",labelStyle:{paddingLeft:"24px",color:"#5F6269",backgroundColor:"white",width:"25%",borderRight:"none",borderBottom:"none"},children:[(0,b.jsx)(l.default.Item,{label:"\u8fde\u63a5\u540d",children:J.apiNamespace}),(0,b.jsx)(l.default.Item,{label:"\u7c7b\u578b",children:J.dbType}),(0,b.jsx)(l.default.Item,{label:"\u7c7b\u578b",children:"0"==J.appendType?"\u8fde\u63a5URL":"1"==J.appendType?"\u8fde\u63a5\u53c2\u6570":""}),"1"==J.appendType?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.default.Item,{label:"\u4e3b\u673a",children:J.host}),(0,b.jsx)(l.default.Item,{label:"\u6570\u636e\u5e93\u540d",children:J.dbName}),(0,b.jsx)(l.default.Item,{label:"\u7aef\u53e3",children:J.port}),(0,b.jsx)(l.default.Item,{label:"\u7528\u6237",children:J.userName}),(0,b.jsx)(l.default.Item,{label:"\u5bc6\u7801",children:M?(0,b.jsxs)("span",{children:[J.password,(0,b.jsx)(s.Z,{className:"ml-2",type:"icon-xiaoyanjing-chakan",onClick:function(){return $(!M)}})]}):(0,b.jsxs)("span",{children:["**********",(0,b.jsx)(s.Z,{className:"ml-2",type:"icon-xiaoyanjing-yincang",onClick:function(){return $(!M)}})]})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.default.Item,{label:"\u73af\u5883\u53d8\u91cf",children:"0"==(null===(n=J.databaseUrl)||void 0===n?void 0:n.kind)?"\u503c":"1"==(null===(t=J.databaseUrl)||void 0===t?void 0:t.kind)?"\u73af\u5883\u53d8\u91cf":""}),(0,b.jsx)(l.default.Item,{label:"\u8fde\u63a5URL",children:null===(o=J.databaseUrl)||void 0===o?void 0:o.val})]})]})})]}):"form"===y?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"pb-8px flex items-center justify-between border-gray border-b ",children:[""==j.name?(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsx)("span",{className:"ml-3",children:"\u521b\u5efa\u6570\u636e\u6e90"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsx)("span",{className:"ml-2",children:j.name}),(0,b.jsx)("span",{className:"ml-2 text-xs text-gray-500/80",children:"main"})]}),(0,b.jsxs)("div",{className:"flex  items-center justify-end w-36",children:[(0,b.jsx)(c.default,{className:"".concat(B()["connect-check-btn-common"]," w-16 mr-4"),onClick:function(){return g("detail",j.id,j.sourceType)},children:"\u53d6\u6d88"}),(0,b.jsx)(c.default,{disabled:A,className:"".concat(B()["connect-check-btn"]),onClick:function(){return H.submit()},children:""==j.name?"\u521b\u5efa":"\u4fdd\u5b58"})]})]}),(0,b.jsx)("div",{className:"".concat(B()["form-contain"]," py-6 rounded-xl mb-4"),children:(0,b.jsxs)(C.Z,{form:H,style:{width:"90%"},name:"basic",labelCol:{span:3},wrapperCol:{span:12},onFinish:function(e){ue(e)},onFinishFailed:function(e){console.log("Failed:",e)},onValuesChange:function(e){var n=H.getFieldsError().some((function(e){return e.errors.length}));Q(n)},validateTrigger:["onBlur","onChange"],autoComplete:"new-password",labelAlign:"left",initialValues:{apiNamespace:J.apiNamespace,dbType:J.dbType,appendType:J.appendType||"0",host:J.host,dbName:J.dbName,port:J.port,userName:J.userName,password:J.password,databaseUrl:{kind:(null===(d=J.databaseUrl)||void 0===d?void 0:d.kind)||"0",val:null===(f=J.databaseUrl)||void 0===f?void 0:f.val}},children:[(0,b.jsx)(C.Z.Item,{label:"\u540d\u79f0:",name:"apiNamespace",rules:[{required:!0,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165...",autoComplete:"off",autoFocus:!0})}),(0,b.jsx)(C.Z.Item,{label:"\u7c7b\u578b:",name:"dbType",children:(0,b.jsxs)(S.default,{placeholder:"\u8bf7\u8f93\u5165...",defaultValue:"MySQL",children:[(0,b.jsx)(S.default.Option,{value:"MySQL",children:"MySql"}),(0,b.jsx)(S.default.Option,{value:"SQLITE",children:"SQLITE"}),(0,b.jsx)(S.default.Option,{value:"PGSQL",children:"PGSQL"}),(0,b.jsx)(S.default.Option,{value:"MONGODB",children:"MONGODB"})]})}),(0,b.jsx)(C.Z.Item,{label:"\u7c7b\u578b:",name:"appendType",children:(0,b.jsxs)(w.default.Group,{onChange:function(e){return function(e){switch(e){case"0":de(le);break;case"1":de(re);break;default:de("")}}(e.target.value)},children:[(0,b.jsx)(w.default,{value:"0",style:{marginRight:"50px"},children:"\u8fde\u63a5URL"}),(0,b.jsx)(w.default,{value:"1",children:" \u8fde\u63a5\u53c2\u6570 "})]})}),oe,(0,b.jsx)(C.Z.Item,{children:(0,b.jsxs)(c.default,{className:B()["connect-edit-btn"],onClick:function(){return e="bottomLeft",void Z.default.open({message:(0,b.jsx)(s.Z,{type:"icon-xingzhuangjiehe"}),description:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{children:"\u94fe\u63a5\u5931\u8d25"}),"\u63cf\u8ff0\u6027\u8bed\u53e5\u63cf\u8ff0\u6027\u8bed\u53e5\u63cf\u8ff0\u6027\u8bed\u53e5"]}),placement:e});var e},children:[(0,b.jsx)(F.Z,{}),(0,b.jsx)("span",{children:"\u6d4b\u8bd5\u94fe\u63a5"})]})})]})})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)(l.default,{bordered:!0,layout:"vertical",size:"small",className:"w-3/8 mr-10",labelStyle:{width:"30%"},children:(0,b.jsx)(l.default.Item,{label:"\u81ea\u5b9a\u4e49\u7c7b\u578b",contentStyle:{padding:"0"},children:(0,b.jsx)(m.ZP,{height:"90vh",defaultLanguage:"typescript",defaultValue:"// some comment",className:"".concat(B().monaco)})})}),(0,b.jsx)(l.default,{bordered:!0,layout:"vertical",size:"small",className:"w-5/8",labelStyle:{width:"30%"},children:(0,b.jsx)(l.default.Item,{label:"\u5b57\u6bb5\u7c7b\u578b\u6620\u5c04",contentStyle:{padding:"0"},children:(0,b.jsx)("div",{className:"".concat(B()["db-setting-table"]),children:(0,b.jsx)(N.Z,{columns:L,dataSource:R,pagination:!1})})})})]})})})}t(61953);var U=t(13413),V=t(48933),M=t.n(V),$=[{name:"API",items:[{name:"REST API",logo:"api-rest.svg",sourceType:2},{name:"GraphQL API",logo:"api-graphql.svg",sourceType:3}]},{name:"\u6570\u636e\u5e93",items:[{name:"PostgreSQL",logo:"api-db.svg",sourceType:1},{name:"MySQL",logo:"api-db.svg",sourceType:1}]},{name:"\u81ea\u5b9a\u4e49",items:[{name:"\u81ea\u5b9a\u4e49",logo:"api-custom.svg",sourceType:4}]}];function K(){var e=(0,a.useContext)(x.BP),n=(0,a.useContext)(x.lt).handleToggleDesigner;return(0,b.jsx)(b.Fragment,{children:$.map((function(t){return(0,b.jsxs)("div",{className:"my-42px",children:[(0,b.jsx)("div",{className:"text-lg ".concat(M().title),children:(0,b.jsx)("span",{className:"pl-2.5",children:t.name})}),(0,b.jsx)("div",{className:"flex flex-wrap gap-x-9.5 gap-y-5 items-center my-4",children:t.items.map((function(t){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"cursor-pointer text-[#333333FF] border border-gray-300/20 bg-[#FDFDFDFF] py-3.5 pl-4 min-w-53 w-53",onClick:function(){return function(t){var a={id:-Date.now(),name:"",config:{},sourceType:t,switch:0};e({type:"added",data:a}),n("form",a.id,t)}(t.sourceType)},children:[(0,b.jsx)(U.Z,{height:28,width:28,src:"/assets/".concat(t.logo),alt:t.name,preview:!1}),(0,b.jsx)("span",{className:"ml-3",children:t.name})]},t.name)})}))})]},t.name)}))})}t(84971);var H=t(68109),J=(t(99697),t(97257)),Y=(t(24e3),t(49164)),W=(t(72314),t(77408)),X=(t(2367),t(61333)),ee=(t(47418),t(84283)),ne=t(58784),te=t(59682),ae=t(77308),se=t(79958),le=t.n(se);function re(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?re(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ie=[{dataIndex:"key",key:"key",width:"30%",render:function(e,n){var t=n.key;return(0,b.jsx)("span",{className:"pl-1",children:t})}},{dataIndex:"val",key:"val",width:"70%",render:function(e,n){var t=n.kind,a=n.val;return(0,b.jsxs)("div",{className:"flex items-center",children:["0"==t?(0,b.jsx)(s.Z,{type:"icon-zhi",className:"text-[24px]"}):"1"==t?(0,b.jsx)(s.Z,{type:"icon-shifoubixu2",className:"text-[24px]"}):(0,b.jsx)(s.Z,{type:"icon-biangeng1",className:"text-[24px]"}),(0,b.jsx)("span",{className:"ml-2",children:a})]})}}];function oe(e){var n=e.content,t=e.type,o=n.config,d=(0,a.useContext)(x.lt).handleToggleDesigner,m=(0,a.useContext)(x.BP),f=(0,h.x)({}),j=(0,u.Z)(f,2),y=j[0],g=j[1],v=(0,h.x)({}),w=(0,u.Z)(v,2),Z=w[0],_=w[1],I=(0,h.x)(!1),F=(0,u.Z)(I,2),T=F[0],B=F[1],A=(0,h.x)(void 0!==o.loadSchemaFromString),E=(0,u.Z)(A,2),L=E[0],R=E[1],z=(0,h.x)(!1),D=(0,u.Z)(z,2),q=D[0],G=D[1],Q=(0,h.x)(!0),U=(0,u.Z)(Q,2),V=U[0],M=U[1],$=C.Z.useForm(),K=(0,u.Z)($,1)[0],se=S.default.Option,re=ee.Z.Panel;(0,a.useEffect)((function(){R(void 0!==o.loadSchemaFromString)}),[t]),(0,a.useEffect)((function(){K.resetFields()}),[n,t]);var oe=function(){var e=(0,k.Z)(O().mark((function e(t){var a,s,l,r,c,i,u,h;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.headers=null===(a=t.headers)||void 0===a?void 0:a.filter((function(e){return void 0!=e.key})),r=ce({},t),c=null===(s=o.loadSchemaFromString)||void 0===s?void 0:s.lastIndexOf("/"),i=null===(l=o.loadSchemaFromString)||void 0===l?void 0:l.substring(c+1),!y.uid){e.next=13;break}if(!o.loadSchemaFromString){e.next=8;break}return e.next=8,(0,p.Z)({method:"post",url:"/dataSource/removeFile",data:{id:i}});case 8:return e.next=10,(0,p.Z)({headers:{"Content-Type":"multipart/form-data"},method:"post",url:"/dataSource/import",data:{file:y}});case 10:r.loadSchemaFromString=e.sent,e.next=20;break;case 13:if(!T){e.next=19;break}return e.next=16,(0,p.Z)({method:"post",url:"/dataSource/removeFile",data:{id:i}});case 16:r.loadSchemaFromString=void 0,e.next=20;break;case 19:r.loadSchemaFromString=o.loadSchemaFromString;case 20:if(""!=n.name){e.next=29;break}return u=ce(ce({},n),{},{config:r,name:t.apiNameSpace}),Reflect.deleteProperty(u,"id"),e.next=25,p.Z.post("/dataSource",u);case 25:h=e.sent,n.id=h,e.next=31;break;case 29:return e.next=31,p.Z.put("/dataSource",ce(ce({},n),{},{config:r,name:t.apiNameSpace}));case 31:p.Z.get("/dataSource").then((function(e){m({type:"fetched",data:e})})).then((function(){d("detail",n.id)}));case 32:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),de=function(e){switch(e){case"0":return M(!0),void _({pattern:/^\w{1,128}$/g,message:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u5927\u4e8e128\u7684\u975e\u7a7a\u503c"});case"1":return void M(!1);case"2":return M(!0),void _({pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\u7ec4\u6210"});default:return}},ue=[],me=function(e){_({pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\u7ec4\u6210"})};return n?(0,b.jsxs)(b.Fragment,{children:["detail"===t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2",children:[n.name," ",(0,b.jsx)("span",{className:"text-xs text-gray-500/80",children:"GET"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center",children:[(0,b.jsx)(i.Z,{checked:0==n.switch,checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(e){p.Z.put("/dataSource",ce(ce({},n),{},{switch:1==e?0:1})).then((function(){p.Z.get("/dataSource").then((function(e){m({type:"fetched",data:e})}))}))},className:le()["switch-check-btn"]}),(0,b.jsxs)("div",{className:"w-160px",children:[(0,b.jsx)(c.default,{className:"".concat(le()["connect-check-btn-common"]," w-16 ml-4"),onClick:function(){G(!0)},children:(0,b.jsx)("span",{children:"\u6d4b\u8bd5"})}),(0,b.jsx)(c.default,{className:"".concat(le()["edit-btn"]," ml-4"),onClick:function(){return d("form",n.id)},children:(0,b.jsx)("span",{children:"\u7f16\u8f91"})})]})]})]}),(0,b.jsx)("div",{className:"flex justify-center mb-8",children:(0,b.jsxs)(l.default,{bordered:!0,column:1,size:"small",className:le()["descriptions-box"],labelStyle:{backgroundColor:"white",width:"30.5%",borderRight:"none",borderBottom:"none"},children:[(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u540d\u79f0"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.apiNameSpace}),(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"Graphql \u7aef\u70b9"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.url}),null!==o&&void 0!==o&&o.loadSchemaFromString?(0,b.jsxs)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u6307\u5b9aSchema"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),className:"justify-start",children:[(0,b.jsx)(s.Z,{type:"icon-wenjian1"})," ",o.loadSchemaFromString]}):""]})}),(0,b.jsx)("h2",{className:"ml-3 mb-3",children:"\u8bf7\u6c42\u5934"}),(0,b.jsx)("div",{className:"".concat(le()["table-contain"]),children:(0,b.jsx)(N.Z,{bordered:!0,showHeader:!1,columns:ie,rowKey:"key",dataSource:o.headers||[],pagination:!1,className:"mb-10"})}),(0,b.jsx)(ee.Z,{ghost:!0,bordered:!1,defaultActiveKey:["1"],expandIcon:function(e){var n=e.isActive;return(0,b.jsx)(s.Z,{type:"icon-xiala",rotate:n?0:-90})},className:"".concat(le()["collapse-box"]," site-collapse-custom-collapse bg-light-50"),children:(0,b.jsx)(re,{header:"\u66f4\u591a",className:"site-collapse-custom-panel",children:(0,b.jsx)("div",{className:"flex justify-center mb-8",children:(0,b.jsxs)(l.default,{colon:!1,column:1,labelStyle:{backgroundColor:"white",width:"31%",borderRight:"none",borderBottom:"none",marginLeft:"10px"},children:[(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u662f\u5426\u5185\u90e8"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.internal?(0,b.jsx)(X.default,{color:"green",children:"\u5f00\u542f"}):(0,b.jsx)(X.default,{color:"red",children:"\u5173\u95ed"})}),(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u81ea\u5b9a\u4e49Float\u6807\u91cf"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.customFloatScalars}),(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u81ea\u5b9a\u4e49INT\u6807\u91cf"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.customIntScalars}),(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u6392\u9664\u91cd\u547d\u540d\u6839\u5b57\u6bb5"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),className:"justify-start",children:o.skipRenameRootFields})]})})},"1")})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b",children:[""==n.name?(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsx)("span",{className:"ml-2",children:"\u521b\u5efa\u6570\u636e\u6e90"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2",children:[n.name," ",(0,b.jsx)("span",{className:"text-xs text-gray-500/80",children:"GET"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center w-40",children:[(0,b.jsx)(c.default,{className:"".concat(le()["connect-check-btn-common"]," w-16 ml-4"),onClick:function(){return d("detail",n.id,n.sourceType)},children:(0,b.jsx)("span",{children:"\u53d6\u6d88"})}),(0,b.jsx)(c.default,{className:"".concat(le()["edit-btn"]," ml-4"),onClick:function(){K.submit()},children:""==n.name?"\u521b\u5efa":"\u4fdd\u5b58"})]})]}),(0,b.jsx)("div",{className:"py-6 rounded-xl mb-4",children:(0,b.jsxs)(C.Z,{form:K,name:"basic",labelCol:{span:3},wrapperCol:{span:11},onFinish:function(e){oe(e)},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",validateTrigger:["onBlur","onChange"],className:"ml-3",labelAlign:"left",initialValues:{apiNameSpace:o.apiNameSpace,url:o.url,internal:o.isInner,customFloatScalars:o.defineFloat,customIntScalars:o.defineInt,skipRenameRootFields:o.exceptRename,headers:o.headers||[{kind:"0"}],agreement:void 0!==o.loadSchemaFromString},children:[(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u540d\u79f0:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),colon:!1,style:{marginBottom:"20px"},name:"apiNameSpace",rules:[{required:!0,message:"\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}],children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"Graphql \u7aef\u70b9:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),colon:!1,required:!0,rules:[{pattern:/^(?:(http|https|ftp):\/\/)?((?:[\w-]+\.)+[a-z0-9]+)((?:\/[^/?#]*)+)?(\?[^#]+)?(#.+)?$/i,message:"\u8bf7\u586b\u5199\u89c4\u8303\u57df\u540d"}],style:{marginBottom:"20px"},name:"url",children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(C.Z.Item,{name:"agreement",children:(0,b.jsx)(W.default,{onChange:function(){R(!L)},children:"\u901a\u8fc7\u53d1\u9001\u6307\u4ee4,\u81ea\u52a8\u5185\u7701Schema"})}),L?(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u6307\u5b9aSchema:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),colon:!1,name:"loadSchemaFromString",required:!0,valuePropName:"fileList",style:{marginBottom:"48px"},getValueFromEvent:function(e){return Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList},children:(0,b.jsx)(Y.Z,{defaultFileList:o.loadSchemaFromString?[{name:o.loadSchemaFromString,uid:o.loadSchemaFromString}]:[],onRemove:function(){B(!0),g({})},maxCount:1,beforeUpload:function(e){return new RegExp(".json|.yaml","g").test(e.name)?g(e):e.status="error",!1},children:(0,b.jsx)(c.default,{icon:(0,b.jsx)(ne.Z,{}),className:"w-159.5",children:"\u6dfb\u52a0\u6587\u4ef6"})})}):"",(0,b.jsx)("h2",{className:"ml-3 mb-3",children:"\u8bf7\u6c42\u5934:"}),(0,b.jsx)(C.Z.Item,{wrapperCol:{span:24},children:(0,b.jsx)(C.Z.List,{name:"headers",children:function(e,n,t){var a=n.add,l=n.remove,i=t.errors;return(0,b.jsxs)(b.Fragment,{children:[e.map((function(e,n){return(0,b.jsxs)(J.default,{align:"baseline",children:[(0,b.jsx)(C.Z.Item,{className:"w-52.5",name:[e.name,"key"],children:(0,b.jsx)(r.default,{})}),(0,b.jsx)(C.Z.Item,{className:"w-40",name:[e.name,"kind"],children:(0,b.jsxs)(S.default,{onChange:de,children:[(0,b.jsx)(se,{value:"0",children:"\u503c"}),(0,b.jsx)(se,{value:"1",children:"\u73af\u5883\u53d8\u91cf"}),(0,b.jsx)(se,{value:"2",children:"\u8f6c\u53d1\u81ea\u5ba2\u6237\u7aef"})]})}),(0,b.jsx)(C.Z.Item,{className:"w-135",name:[e.name,"val"],rules:[Z],children:V?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(S.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(se,{value:"1",children:"1"}),(0,b.jsx)(se,{value:"2",children:"2"})]})}),(0,b.jsx)(s.Z,{type:"icon-guanbi",onClick:function(){l(n)}})]},e.key)})),(0,b.jsxs)(C.Z.Item,{wrapperCol:{span:16},children:[(0,b.jsx)(c.default,{type:"dashed",onClick:function(){a({kind:"0"})},icon:(0,b.jsx)(ne.Z,{}),className:"text-gray-500/60 w-1/1",children:"\u65b0\u589e\u8bf7\u6c42\u5934\u4fe1\u606f"}),(0,b.jsx)(C.Z.ErrorList,{errors:i})]})]})}})}),(0,b.jsx)(ee.Z,{bordered:!1,defaultActiveKey:["1"],expandIcon:function(e){var n=e.isActive;return(0,b.jsx)(te.Z,{rotate:n?90:0})},className:"site-collapse-custom-collapse bg-light-50",children:(0,b.jsxs)(re,{header:"\u66f4\u591a",className:"site-collapse-custom-panel",children:[(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u662f\u5426\u5185\u90e8:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),valuePropName:"checked",name:"internal",colon:!1,style:{marginBottom:"20px"},children:(0,b.jsx)(i.Z,{className:le()["switch-edit-btn"],size:"small"})}),(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u81ea\u5b9a\u4e49Float\u6807\u91cf:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),name:"customFloatScalars",rules:[Z],colon:!1,style:{marginBottom:"20px"},children:(0,b.jsx)(S.default,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:me,children:ue})}),(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u81ea\u5b9a\u4e49INT\u6807\u91cf:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),name:"customIntScalars",rules:[Z],colon:!1,style:{marginBottom:"20px"},children:(0,b.jsx)(S.default,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:me,children:ue})}),(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:le()["label-style"],children:"\u6392\u9664\u91cd\u547d\u540d\u6839\u5b57\u6bb5:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(le()["form-icon"]," ml-1")})]}),colon:!1,style:{marginBottom:"20px"},name:"skipRenameRootFields",rules:[Z],children:(0,b.jsx)(S.default,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",onChange:me,children:ue})})]},"1")})]})})]}),(0,b.jsx)(H.Z,{title:"GraphiQL",open:q,onOk:function(){return G(!1)},onCancel:function(){return G(!1)},footer:null,centered:!0,bodyStyle:{height:"90vh"},width:"90vw",children:(0,b.jsx)(ae.default,{url:o.url,data:"",onSave:function(){}})})]}):(0,b.jsx)(P.Z,{})}t(38059);var de=t(86742),ue=t(48765),me=t(51765),he=t.n(me);function xe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?xe(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var fe=[{dataIndex:"key",width:"30%",render:function(e,n){var t=n.key;return(0,b.jsx)("span",{className:"pl-1",children:t})}},{dataIndex:"val",width:"70%",render:function(e,n){var t=n.kind,a=n.val;return(0,b.jsxs)("div",{className:"flex items-center",children:["0"==t?(0,b.jsx)(s.Z,{type:"icon-zhi",className:"text-[24px]"}):"1"==t?(0,b.jsx)(s.Z,{type:"icon-shifoubixu2",className:"text-[24px]"}):(0,b.jsx)(s.Z,{type:"icon-biangeng1",className:"text-[24px]"}),(0,b.jsx)("span",{className:"ml-2",children:a})]})}}];function je(e){var n,t,d=e.content,m=e.type,f=(0,a.useContext)(x.lt).handleToggleDesigner,j=(0,a.useContext)(x.BP),y=C.Z.useForm(),g=(0,u.Z)(y,1)[0],v=(0,h.x)(!1),Z=(0,u.Z)(v,2),_=Z[0],I=Z[1],F=(0,h.x)(!1),T=(0,u.Z)(F,2),B=T[0],A=T[1],E=(0,h.x)(1),L=(0,u.Z)(E,2),R=L[0],z=L[1],D=(0,h.x)(!1),q=(0,u.Z)(D,2),G=q[0],Q=q[1],U=(0,h.x)({}),V=(0,u.Z)(U,2),M=V[0],$=V[1],K=(0,h.x)({}),W=(0,u.Z)(K,2),ae=W[0],se=W[1],le=(0,h.x)(!0),re=(0,u.Z)(le,2),ce=re[0],ie=re[1],oe=(0,h.x)(!0),me=(0,u.Z)(oe,2),xe=me[0],je=me[1];(0,a.useEffect)((function(){g.resetFields()}),[d,m]),(0,a.useEffect)((function(){if(window&&document){var e=document.createElement("script"),n=document.getElementsByTagName("body")[0];e.src="//unpkg.com/rapidoc/dist/rapidoc-min.js",n.appendChild(e)}}),[]);if(!d)return(0,b.jsx)(P.Z,{});var be=d.config,ye=function(){I(!_)},ge=function(e){switch(e){case"0":return je(!0),void $({pattern:/^\w{1,128}$/g,message:"\u8bf7\u8f93\u5165\u957f\u5ea6\u4e0d\u5927\u4e8e128\u7684\u975e\u7a7a\u503c"});case"1":return void je(!1);case"2":return je(!0),void $({pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\u7ec4\u6210"});default:return}},ve=function(){var e=(0,k.Z)(O().mark((function e(n){var t,a,s,l,r,c,i,o;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.headers=null===(t=n.headers)||void 0===t?void 0:t.filter((function(e){return void 0!=e.key})),l=pe({},n),r=null===(a=be.filePath)||void 0===a?void 0:a.lastIndexOf("/"),c=null===(s=be.filePath)||void 0===s?void 0:s.substring(r+1),!ae.uid){e.next=13;break}if(!be.filePath){e.next=8;break}return e.next=8,(0,p.Z)({method:"post",url:"/dataSource/removeFile",data:{id:c}});case 8:return e.next=10,(0,p.Z)({headers:{"Content-Type":"multipart/form-data"},method:"post",url:"/dataSource/import",data:{file:ae}});case 10:l.filePath=e.sent,e.next=20;break;case 13:if(!G){e.next=19;break}return e.next=16,(0,p.Z)({method:"post",url:"/dataSource/removeFile",data:{id:c}});case 16:l.filePath=void 0,e.next=20;break;case 19:l.filePath=be.filePath;case 20:if(""!=d.name){e.next=29;break}return i=pe(pe({},d),{},{config:l,name:n.apiNameSpace}),Reflect.deleteProperty(i,"id"),e.next=25,p.Z.post("/dataSource",i);case 25:o=e.sent,d.id=o,e.next=31;break;case 29:return e.next=31,p.Z.put("/dataSource",pe(pe({},d),{},{config:l,name:n.apiNameSpace}));case 31:p.Z.get("/dataSource").then((function(e){j({type:"fetched",data:e})})).then((function(){f("detail",d.id)}));case 32:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ne=de.Z.TabPane,we=S.default.Option,Ze=ee.Z.Panel;return(0,b.jsx)(b.Fragment,{children:"detail"===m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2",children:[d.name," ",(0,b.jsx)("span",{className:"text-xs text-gray-500/80",children:"GET"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center",children:[(0,b.jsx)(i.Z,{checked:0==d.switch,checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:function(e){p.Z.put("/dataSource",pe(pe({},d),{},{switch:1==e?0:1})).then((function(){p.Z.get("/dataSource").then((function(e){j({type:"fetched",data:e})}))}))},className:he()["switch-check-btn"]}),(0,b.jsx)(c.default,{className:"".concat(he()["connect-check-btn-common"]," w-16 ml-4"),onClick:function(){return A(!0)},children:"\u6d4b\u8bd5"}),(0,b.jsx)(c.default,{className:"".concat(he()["edit-btn"]," ml-4"),onClick:function(){return f("form",d.id)},children:"\u7f16\u8f91"})]})]}),(0,b.jsx)("div",{className:"flex justify-center mb-8",children:(0,b.jsxs)(l.default,{bordered:!0,column:1,size:"small",className:he()["descriptions-box"],labelStyle:{backgroundColor:"white",width:"30.5%",borderRight:"none",borderBottom:"none"},children:[(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:he()["label-style"],children:"\u540d\u79f0"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),className:"justify-start",children:be.apiNameSpace}),(0,b.jsxs)(l.default.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:he()["label-style"],children:"\u6307\u5b9aOAS"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),className:"justify-start",children:[(0,b.jsx)(s.Z,{type:"icon-wenjian1"}),be.filePath]})]})}),(0,b.jsxs)(de.Z,{defaultActiveKey:"1",children:[(0,b.jsx)(Ne,{tab:"\u8bf7\u6c42\u5934",children:(0,b.jsx)("div",{className:"".concat(he()["table-contain"]),children:(0,b.jsx)(N.Z,{bordered:!0,showHeader:!1,columns:fe,rowKey:"key",dataSource:be.headers||[],pagination:!1,className:"mb-10"})})},"1"),(0,b.jsx)(Ne,{tab:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:he()["label-style"],children:"\u6388\u6743"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),children:(0,b.jsx)("div",{className:"flex justify-center mb-11",children:(0,b.jsxs)(l.default,{bordered:!0,column:1,size:"small",className:he()["descriptions-box"],labelStyle:{backgroundColor:"white",borderRight:"none",borderBottom:"none",width:"30%",padding:"10px",paddingLeft:"20px"},children:[(0,b.jsx)(l.default.Item,{label:"JWT\u83b7\u53d6",children:1==be.jwtType?"\u52a8\u6001":"\u9759\u6001"}),(0,b.jsx)(l.default.Item,{label:"\u5bc6\u94a5",children:_?(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"mr-5",children:null===(n=be.secret)||void 0===n?void 0:n.val}),(0,b.jsx)(s.Z,{type:"icon-xiaoyanjing-chakan",onClick:ye})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"mr-5",children:"********"}),(0,b.jsx)(s.Z,{type:"icon-xiaoyanjing-yincang",onClick:ye})]})}),(0,b.jsx)(l.default.Item,{label:"\u7b7e\u540d\u65b9\u6cd5",children:be.signingMethod}),(0,b.jsx)(l.default.Item,{label:"Token\u7aef\u70b9",children:be.tokenPoint})]})})},"2")]}),(0,b.jsx)(ee.Z,{ghost:!0,bordered:!1,defaultActiveKey:["0"],expandIcon:function(e){var n=e.isActive;return(0,b.jsx)(s.Z,{type:"icon-xiala",rotate:n?0:-90})},className:"".concat(he()["collapse-box"]," site-collapse-custom-collapse bg-white-50"),children:(0,b.jsx)(Ze,{header:"\u66f4\u591a",className:"site-collapse-custom-panel",children:(0,b.jsx)(l.default,{colon:!1,column:1,labelStyle:{backgroundColor:"white",width:"31%",borderRight:"none",borderBottom:"none",paddingLeft:"16px"},children:(0,b.jsx)(l.default.Item,{label:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:he()["label-style"],children:"\u662f\u5426\u72b6\u6001\u8054\u5408:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),className:"justify-start",children:be.statusCodeUnions?(0,b.jsx)(X.default,{color:"green",children:"\u5f00\u542f"}):(0,b.jsx)(X.default,{color:"red",children:"\u5173\u95ed"})})})},"1")}),(0,b.jsx)(H.Z,{centered:!0,open:B,onCancel:function(){return A(!1)},destroyOnClose:!0,width:"80%",bodyStyle:{height:"885px",overflow:"auto"},footer:null,children:(0,b.jsx)("div",{className:he()["redoc-container"],children:(0,b.jsx)("rapi-doc",{"spec-url":"//".concat(ue.yK,"/static/upload/oas/").concat(null!==(t=be.filePath)&&void 0!==t?t:""),"show-header":"false","show-info":"false","allow-authentication":"false","allow-server-selection":"false","allow-api-list-style-selection":"false","render-style":"read"})})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"pb-9px flex items-center justify-between border-gray border-b",children:[""==d.name?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsx)("span",{className:"ml-2",children:"\u521b\u5efa\u6570\u636e\u6e90"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Z,{type:"icon-shujuyuantubiao1"}),(0,b.jsxs)("span",{className:"ml-2",children:[d.name," ",(0,b.jsx)("span",{className:"text-xs text-gray-500/80",children:"GET"})]})]}),(0,b.jsxs)("div",{className:"flex justify-center items-center w-160px",children:[(0,b.jsx)(c.default,{className:"".concat(he()["connect-check-btn-common"]," w-16 ml-4"),onClick:function(){return f("detail",d.id,d.sourceType)},children:(0,b.jsx)("span",{children:"\u53d6\u6d88"})}),(0,b.jsx)(c.default,{className:"".concat(he()["edit-btn"]," ml-4"),onClick:function(){return g.submit()},children:""==d.name?"\u521b\u5efa":"\u4fdd\u5b58"})]})]}),(0,b.jsx)("div",{className:"py-6 rounded-xl mb-4",children:(0,b.jsxs)(C.Z,{form:g,name:"basic",labelCol:{span:3},wrapperCol:{span:11},onFinish:function(e){ve(e)},onFinishFailed:function(e){throw o.default.error("\u63d0\u4ea4\u5931\u8d25!"),e},autoComplete:"off",validateTrigger:["onBlur","onChange"],labelAlign:"left",className:"ml-3",initialValues:{apiNameSpace:be.apiNameSpace,headers:be.headers||[],statusCodeUnions:be.statusCodeUnions,secret:be.secret||{kind:"0"}},children:[(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"\u540d\u79f0:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"},{pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/g,message:"\u4ee5\u5b57\u6bcd\u6216\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u53ea\u80fd\u7531\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u548c\u6570\u5b57\u7ec4\u6210"}],name:"apiNameSpace",colon:!1,style:{marginBottom:"20px"},children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})}),(0,b.jsx)(C.Z.Item,{rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20 OAS \u6587\u4ef6"}],label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"\u6307\u5b9aOAS:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),colon:!1,name:"filePath",valuePropName:"fileList",style:{marginBottom:"20px"},getValueFromEvent:function(e){return Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList},children:(0,b.jsx)(Y.Z,{defaultFileList:be.filePath?[{name:be.filePath,uid:be.filePath}]:[],maxCount:1,beforeUpload:function(e){return new RegExp(".json|.yaml","g").test(e.name)?se(e):e.status="error",!1},onRemove:function(){Q(!0),se({})},children:(0,b.jsx)(c.default,{icon:(0,b.jsx)(ne.Z,{}),className:"w-159.5",children:"\u6dfb\u52a0\u6587\u4ef6"})})}),(0,b.jsxs)(de.Z,{defaultActiveKey:"1",className:"ml-3",children:[(0,b.jsx)(Ne,{tab:"\u8bf7\u6c42\u5934",children:(0,b.jsx)(C.Z.Item,{wrapperCol:{xs:{span:24},sm:{span:24}},children:(0,b.jsx)(C.Z.List,{name:"headers",children:function(e,n,t){var a=n.add,l=n.remove,i=t.errors;return(0,b.jsxs)(b.Fragment,{children:[e.map((function(e,n){return(0,b.jsxs)(J.default,{align:"baseline",children:[(0,b.jsx)(C.Z.Item,{className:"w-52.5",wrapperCol:{span:24},name:[e.name,"key"],children:(0,b.jsx)(r.default,{})}),(0,b.jsx)(C.Z.Item,{className:"w-40",wrapperCol:{span:24},name:[e.name,"kind"],children:(0,b.jsxs)(S.default,{onChange:ge,children:[(0,b.jsx)(we,{value:"0",children:"\u503c"}),(0,b.jsx)(we,{value:"1",children:"\u73af\u5883\u53d8\u91cf"}),(0,b.jsx)(we,{value:"2",children:"\u8f6c\u53d1\u81ea\u5ba2\u6237\u7aef"})]})}),(0,b.jsx)(C.Z.Item,{className:"w-135",wrapperCol:{span:24},name:[e.name,"val"],rules:[M],children:xe?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(S.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(we,{value:"1",children:"1"}),(0,b.jsx)(we,{value:"2",children:"2"})]})}),(0,b.jsx)(s.Z,{type:"icon-guanbi",onClick:function(){return l(n)}})]},e.key)})),(0,b.jsxs)(C.Z.Item,{wrapperCol:{span:16},children:[(0,b.jsx)(c.default,{type:"dashed",onClick:function(){return a({kind:"0"})},icon:(0,b.jsx)(ne.Z,{}),className:"text-gray-500/60 w-1/1",children:"\u65b0\u589e\u8bf7\u6c42\u5934\u4fe1\u606f"}),(0,b.jsx)(C.Z.ErrorList,{errors:i})]})]})}})})},"1"),(0,b.jsxs)(Ne,{tab:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"\u6388\u6743"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),children:[(0,b.jsx)(C.Z.Item,{label:"JWT\u83b7\u53d6",name:"jwtType",initialValue:"0",children:(0,b.jsxs)(w.default.Group,{onChange:function(e){z(e.target.value),ie(!ce)},value:R,children:[(0,b.jsx)(w.default,{value:"0",className:"mr-20",children:"\u9759\u6001"}),(0,b.jsx)(w.default,{value:"1",children:"\u52a8\u6001"})]})}),ce?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Z.Item,{label:"\u5bc6\u94a5",children:(0,b.jsxs)(r.default.Group,{compact:!0,children:[(0,b.jsx)(C.Z.Item,{name:["secret","kind"],noStyle:!0,children:(0,b.jsxs)(S.default,{className:"w-1/5",onChange:ge,children:[(0,b.jsx)(we,{value:"0",children:"\u503c"}),(0,b.jsx)(we,{value:"1",children:"\u73af\u5883\u53d8\u91cf"})]})}),(0,b.jsx)(C.Z.Item,{name:["secret","val"],noStyle:!0,rules:[M],children:xe?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(S.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(we,{value:"1",children:"1"}),(0,b.jsx)(we,{value:"2",children:"2"})]})})]})}),(0,b.jsx)(C.Z.Item,{label:"\u7b7e\u540d\u65b9\u6cd5",name:"signingMethod",initialValue:"HS256",children:(0,b.jsx)(w.default,{value:"HS256",checked:!0,children:"HS256"})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Z.Item,{label:"\u5bc6\u94a5",children:(0,b.jsxs)(r.default.Group,{compact:!0,children:[(0,b.jsx)(C.Z.Item,{name:["secret","kind"],noStyle:!0,children:(0,b.jsxs)(S.default,{className:"w-1/5",onChange:ge,children:[(0,b.jsx)(we,{value:"0",children:"\u503c"}),(0,b.jsx)(we,{value:"1",children:"\u73af\u5883\u53d8\u91cf"})]})}),(0,b.jsx)(C.Z.Item,{name:["secret","val"],noStyle:!0,rules:[M],children:xe?(0,b.jsx)(r.default,{style:{width:"80%"},placeholder:"\u8bf7\u8f93\u5165"}):(0,b.jsxs)(S.default,{className:"w-1/5",style:{width:"80%"},children:[(0,b.jsx)(we,{value:"1",children:"1"}),(0,b.jsx)(we,{value:"2",children:"2"})]})})]})}),(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{children:"Token \u7aef\u70b9:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),colon:!1,required:!0,style:{marginBottom:"20px"},name:"tokenPoint",children:(0,b.jsx)(r.default,{placeholder:"\u8bf7\u8f93\u5165..."})})]})]},"2")]}),(0,b.jsx)(ee.Z,{bordered:!1,defaultActiveKey:["0"],expandIcon:function(e){var n=e.isActive;return(0,b.jsx)(te.Z,{rotate:n?90:0})},className:"site-collapse-custom-collapse bg-light-50",children:(0,b.jsx)(Ze,{header:"\u66f4\u591a",className:"site-collapse-custom-panel",children:(0,b.jsx)(C.Z.Item,{label:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:he()["label-style"],children:"\u662f\u5426\u72b6\u6001\u8054\u5408:"}),(0,b.jsx)(s.Z,{type:"icon-wenhao",className:"".concat(he()["form-icon"]," ml-1")})]}),name:"statusCodeUnions",colon:!1,style:{marginBottom:"20px"},valuePropName:"checked",children:(0,b.jsx)(i.Z,{className:he()["switch-edit-btn"],size:"small"})})},"1")})]})})]})})}function be(e){var n=e.content,t=e.showType,l=function(){console.log("aaa")},r=(0,a.useMemo)((function(){var e="";switch(null===n||void 0===n?void 0:n.sourceType){case 1:e="setting"==t?"\u8bbe\u7f6e":"DB";break;case 2:e="REST";break;case 3:e="GraphQL";break;case 4:e="\u81ea\u5b9a\u4e49"}return e}),[null===n||void 0===n?void 0:n.sourceType,t]);return n?(0,b.jsxs)("div",{className:"pl-6 mt-6 mr-6",children:[(0,b.jsxs)("div",{className:"flex justify-start items-center  mb-24px",children:[(0,b.jsxs)("span",{className:"text-base flex-grow font-bold text-[18px]",children:["\u5916\u90e8\u6570\u636e\u6e90 / ",n&&r]}),(0,b.jsx)(s.Z,{type:"icon-lianxi",className:"text-[22px]",onClick:l}),(0,b.jsx)(s.Z,{type:"icon-wenjian1",className:"text-[22px] ml-4",onClick:l}),(0,b.jsx)(s.Z,{type:"icon-bangzhu",className:"text-[22px] ml-4",onClick:l})]}),1===n.sourceType?(0,b.jsx)(Q,{content:n,type:t}):2===n.sourceType?(0,b.jsx)(je,{content:n,type:t}):3===n.sourceType?(0,b.jsx)(oe,{content:n,type:t}):4===n.sourceType?(0,b.jsx)(v,{content:n}):(0,b.jsx)(b.Fragment,{})]}):(0,b.jsxs)("div",{className:"pl-6 mt-6 mr-6",children:[(0,b.jsxs)("div",{className:"flex justify-start items-center  mb-24px",children:[(0,b.jsx)("span",{className:"text-base flex-grow font-bold text-[18px]",children:"\u5916\u90e8\u6570\u636e\u6e90 / \u9009\u62e9\u6570\u636e\u6e90"}),(0,b.jsx)(s.Z,{type:"icon-lianxi",className:"text-[22px]",onClick:l}),(0,b.jsx)(s.Z,{type:"icon-wenjian1",className:"text-[22px] ml-4",onClick:l}),(0,b.jsx)(s.Z,{type:"icon-bangzhu",className:"text-[22px] ml-4",onClick:l})]}),(0,b.jsx)(K,{})]})}var ye=t(84213),ge=t.n(ye),ve=(t(17016),t(8607)),Ne=(t(68123),t(77423)),we=(t(517),t(37608)),Ze=t(7987),ke=t.n(Ze);function Ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ce(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function _e(e){var n,t,l=e.datasourceItem,c=e.onClickItem,i=(0,a.useContext)(x.BP),o=(0,h.x)(""==l.name),d=(0,u.Z)(o,2),m=d[0],f=d[1],j=(0,h.x)(!1),y=(0,u.Z)(j,2),g=y[0],v=y[1],N=(0,a.useContext)(x.lt).handleToggleDesigner,w=(0,a.useContext)(x.ip).currDBId,Z=(0,h.x)(!1),C=(0,u.Z)(Z,2),S=C[0],_=C[1],I=l.config;function F(e){return P.apply(this,arguments)}function P(){return(P=(0,k.Z)(O().mark((function e(n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n){e.next=4;break}i({type:"deleted",data:l}),e.next=7;break;case 4:return e.next=6,p.Z.put("/dataSource",Se(Se({},l),{},{name:n,config:Se(Se({},I),{},{apiNameSpace:n})}));case 6:p.Z.get("/dataSource").then((function(e){i({type:"fetched",data:e})}));case 7:f(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,k.Z)(O().mark((function e(n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.delete("/dataSource/".concat(n.id));case 2:e.sent,i({type:"deleted",data:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){0==e&&(_(!1),v(!1))}var A=(0,b.jsx)(Ne.default,{onClick:function(e){e.domEvent.stopPropagation(),"1"!==e.key&&"2"!==e.key||v(!1)},items:[{key:"1",label:(0,b.jsxs)("div",{onClick:function(){return f(!m)},children:[(0,b.jsx)(s.Z,{type:"icon-zhongmingming"}),(0,b.jsx)("span",{className:"ml-1.5",children:"\u91cd\u547d\u540d"})]})},{key:"2",label:(0,b.jsxs)("div",{onClick:function(){return N("form",l.id)},children:[(0,b.jsx)(s.Z,{type:"icon-bianji"}),(0,b.jsx)("span",{className:"ml-1.5",children:"\u7f16\u8f91"})]})},{key:"3",label:(0,b.jsx)(we.Z,{placement:"right",title:"\u786e\u8ba4\u5220\u9664\u8be5\u5b9e\u4f53\u5417\uff1f",onConfirm:function(){!function(e){T.apply(this,arguments)}(l)},okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onCancel:function(){return v(!1)},overlayClassName:ke()["delete-label"],okType:"danger",children:(0,b.jsxs)("div",{children:[(0,b.jsx)(s.Z,{type:"icon-a-shanchu2"}),(0,b.jsx)("span",{className:"ml-1.5",children:"\u5220\u9664"})]})})}]});return(0,b.jsxs)("div",{className:"flex justify-between items-center py-2.5 pl-5 cursor-pointer\n      ".concat(l.id===w?"bg-[#F8F8F9]":""),style:S?{background:"#F8F8F9"}:{},onMouseEnter:function(){return _(!0)},onMouseLeave:function(){return B(g)},onDoubleClick:function(){return f(!0)},onClick:function(){return c(l)},children:[(0,b.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,b.jsx)(s.Z,{type:"icon-tuozhuai-xuanzhong",className:"-ml-3 mr-1",style:{visibility:S?"visible":"hidden"}}),1==l.sourceType?(0,b.jsx)(s.Z,{type:"SQLITE"==I.dbType?"icon-shujuyuantubiao2":"PGSQL"==I.dbType?"icon-shujuyuantubiao3":"MONGODB"==I.dbType?"icon-shujuyuantubiao4":"icon-shujuyuantubiao1"}):2==l.sourceType?(0,b.jsx)(s.Z,{type:"icon-wenjian1",className:"text-[16px]"}):3==l.sourceType?(0,b.jsx)(s.Z,{type:"icon-QLweixuanzhong1",className:"text-[16px]"}):(0,b.jsx)(s.Z,{type:"icon-wenjian",className:"text-[16px]"}),m?(0,b.jsx)(r.default,{onBlur:function(e){F(e.target.value)},onPressEnter:function(e){F(e.target.value)},onKeyUp:function(e){"Escape"==e.key&&f(!1)},className:"text-sm font-normal leading-4 h-5 w-5/7",defaultValue:l.name,autoFocus:!0,placeholder:"\u8bf7\u8f93\u5165\u5916\u90e8\u6570\u636e\u6e90\u540d"}):(0,b.jsx)("div",{className:"text-sm font-normal ml-2 leading-4 ".concat(0==l.switch?"text-[#000000]":"text-[#AFB0B4]"," ").concat(l.id===w?"font-650":""),children:l.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-[#AFB0B4] text-[14px] mr-3",children:I.dbName||(null===(n=I.databaseUrl)||void 0===n?void 0:n.val.substring((null===(t=I.databaseUrl)||void 0===t?void 0:t.val.length)-3))}),(0,b.jsx)(ve.default,{overlay:A,trigger:["click"],placement:"bottomRight",visible:g,onOpenChange:function(e){v(e),B(e)},children:(0,b.jsx)(s.Z,{type:"icon-gengduo-shu-xuanzhong",onClick:function(e){return e.stopPropagation()},className:"m-auto mr-0 pr-2",style:{visibility:S?"visible":"hidden"}})})]})]},l.name)}var Oe=ee.Z.Panel;function Ie(e){var n=e.onClickItem,t=(0,a.useContext)(x.SV);return(0,b.jsx)(b.Fragment,{children:t.map((function(e){if(""!=e.name)return(0,b.jsx)(_e,{datasourceItem:e,onClickItem:n},e.id)}))})}function Fe(e){var n=e.onClickItem,t=((0,a.useContext)(x.BP),(0,a.useContext)(x.SV),(0,a.useContext)(x.lt).handleToggleDesigner);var s=(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("div",{className:"w-52 flex justify-between py-2",children:"\u5916\u90e8\u6570\u636e\u6e90"}),(0,b.jsx)(ne.Z,{onClick:function(e){e.stopPropagation(),t("db-select")}})]});return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:ge()["datasource-collapse"],children:(0,b.jsx)(ee.Z,{ghost:!0,bordered:!0,children:(0,b.jsx)(Oe,{header:s,children:(0,b.jsx)(Ie,{onClickItem:n})},1)})})})}},61384:function(e,n,t){"use strict";var a=t(57265),s=(0,a.createFromIconfontCN)({scriptUrl:"/iconfont/iconfont.js"});n.Z=s},77308:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var a=t(88609),s=t(89201),l=t(48018),r=t(60247),c=t(76425),i=t.n(c),o=t(79685),d=(t(46545),t(35202)),u=t.n(d),m=t(63342);function h(e){var n=e.url,t=e.data,c=e.onSave,d=(0,o.useState)(),h=d[0],x=d[1],p=(0,o.useState)(null!==t&&void 0!==t?t:'# Welcome to GraphiQL\n#\n# GraphiQL is an in-browser tool for writing, validating, and\n# testing GraphQL queries.\n#\n# Type queries into this side of the screen, and you will see intelligent\n# typeaheads aware of the current GraphQL type schema and live syntax and\n# validation errors highlighted within the text.\n#\n# GraphQL queries typically start with a "{" character. Lines that start\n# with a # are ignored.\n#\n# An example GraphQL query might look like:\n#\n#     {\n#       field(arg: "value") {\n#         subField\n#       }\n#     }\n#\n# Keyboard shortcuts:\n#\n#  Prettify Query:  Shift-Ctrl-P (or press the prettify button above)\n#\n#     Merge Query:  Shift-Ctrl-M (or press the merge button above)\n#\n#       Run Query:  Ctrl-Enter (or press the play button above)\n#\n#   Auto Complete:  Ctrl-Space (or just start typing)\n#\n'),f=p[0],j=p[1],b=(0,o.useRef)();function y(e){return fetch(null!==n&&void 0!==n?n:"/app/main/graphql",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).catch((function(e){throw e}))}return(0,o.useEffect)((function(){y({query:(0,l.K)()}).then((function(e){return x((0,r.Z)(e.data))})).catch((function(e){throw e}))}),[]),(0,o.useEffect)((function(){j(t)}),[t]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i(),{children:(0,m.jsx)("title",{children:"GraphiQL"})}),(0,m.jsxs)("div",{className:"".concat(u().global," graphiql-container"),children:[(0,m.jsx)(s.ZP,{schema:h,query:f,explorerIsOpen:!0,onEdit:j}),(0,m.jsx)(a.yB,{fetcher:y,schema:h,query:f,ref:function(e){return b.current=e},onEditQuery:j,children:(0,m.jsxs)(a.yB.Toolbar,{children:[(0,m.jsx)(a.yB.Button,{onClick:function(){var e,n;return null===(e=b.current)||void 0===e||null===(n=e.ref)||void 0===n?void 0:n.props.prettify()},label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),(0,m.jsx)(a.yB.Button,{onClick:function(){var e,n;return null===(e=b.current)||void 0===e||null===(n=e.ref)||void 0===n?void 0:n.props.merge()},label:"Merge",title:"Merge Query (Shift-Ctrl-M)"}),(0,m.jsx)(a.yB.Button,{onClick:function(){var e,n,t;return null===(e=b.current)||void 0===e||null===(n=e.ref)||void 0===n||null===(t=n.props.historyContext)||void 0===t?void 0:t.toggle()},label:"History",title:"Show History"}),(0,m.jsx)(a.yB.Button,{onClick:function(){var e,n=null===(e=b.current)||void 0===e?void 0:e.props.query;return c(n)},label:"Save",title:"Save"})]})})]})]})}},84213:function(e){e.exports={pannel:"Pannel_pannel__HhmjN",title:"Pannel_title__uUaWL","datasource-collapse":"Pannel_datasource-collapse__V__8p","datasource-border":"Pannel_datasource-border__02dZ5"}},49775:function(e){e.exports={monaco:"Custom_monaco__zbX6e","edit-btn":"Custom_edit-btn__Owb9r","switch-check-btn":"Custom_switch-check-btn__ZaAu6"}},95957:function(e){e.exports={"connect-edit-btn":"DB_connect-edit-btn__gr1_e","connect-check-btn":"DB_connect-check-btn__wOt1f","connect-check-btn-common":"DB_connect-check-btn-common__QHfNO","db-check-setting":"DB_db-check-setting__CFFvT","form-contain":"DB_form-contain__SuK0v","des-contain":"DB_des-contain__S6tfC",monaco:"DB_monaco__Qn158","db-setting-table":"DB_db-setting-table__ratw3"}},48933:function(e){e.exports={title:"Designer_title__epfAq"}},79958:function(e){e.exports={"edit-btn":"Graphql_edit-btn__bqcAZ","switch-check-btn":"Graphql_switch-check-btn__eaD7_","descriptions-box":"Graphql_descriptions-box__55kVn","collapse-box":"Graphql_collapse-box__VzJkr","form-icon":"Graphql_form-icon__hhMA9","label-style":"Graphql_label-style__Oui9z","connect-check-btn-common":"Graphql_connect-check-btn-common__YOZ4C","table-contain":"Graphql_table-contain__R_pAD"}},7987:function(e){e.exports={"delete-label":"PannelItem_delete-label__zQGzl"}},51765:function(e){e.exports={"edit-btn":"Rest_edit-btn__Inn1J","switch-check-btn":"Rest_switch-check-btn__t5oem","switch-edit-btn":"Rest_switch-edit-btn__mhdjp","descriptions-box":"Rest_descriptions-box__lwL8d","collapse-box":"Rest_collapse-box__NzdmA","form-icon":"Rest_form-icon__3SQjD","label-style":"Rest_label-style__RrMb9","connect-check-btn-common":"Rest_connect-check-btn-common__NTg_i","table-contain":"Rest_table-contain__007yR","redoc-container":"Rest_redoc-container__FRI6Q"}},35202:function(e){e.exports={global:"graphiql_global__Ljt2l"}}}]);